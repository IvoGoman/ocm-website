<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap" rel=stylesheet><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://ocm.software/main.b8e4ee04872e04a9cffbaea2279bd3936a61c95d05086ab6a93e3c21217c7c468da4dca7602ddbed6c5a8ae537904366ac2ed1d5eff130b630c4fb4fb8fd94a7.css integrity="sha512-uOTuBIcuBKnP+66iJ5vTk2phyV0FCGq2qT48ISF8fEaNpNynYC3b7WxaiuU3kENmrC7R1e/xMLYwxPtPuP2Upw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><style>@import 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap'</style><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Best Practices | Open Component Model</title><meta name=description content="This chapter contains guidelines for common scenarios how to work with the Open Component Model.
Separate between Build and Publish Building multi-arch images Using Makefiles Prerequisites Templating the resources Pipeline integration Static and Dynamic Variable Substitution Debugging: Explain the blobs directory Self-contained transport archives CICD integration Separate between Build and Publish # Typical automated builds have access to the complete internet ecosystem. This involves downloading of content required for a build (e."><link rel=canonical href=https://ocm.software/docs/guides/best-practices-with-ocm/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Best Practices"><meta property="og:description" content="This chapter contains guidelines for common scenarios how to work with the Open Component Model.
Separate between Build and Publish Building multi-arch images Using Makefiles Prerequisites Templating the resources Pipeline integration Static and Dynamic Variable Substitution Debugging: Explain the blobs directory Self-contained transport archives CICD integration Separate between Build and Publish # Typical automated builds have access to the complete internet ecosystem. This involves downloading of content required for a build (e."><meta property="og:url" content="https://ocm.software/docs/guides/best-practices-with-ocm/"><meta property="og:site_name" content="Open Component Model"><meta property="article:published_time" content="2023-03-13T12:00:26+01:00"><meta property="article:modified_time" content="2023-03-13T12:00:26+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Best Practices"><meta name=twitter:description content><meta name=twitter:card content="summary"><meta name=twitter:image:alt content="Best Practices"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://ocm.software/#/schema/organization/1","name":"OCM","url":"https://ocm.software/","sameAs":["https://github.com/open-component-model"],"logo":{"@type":"ImageObject","@id":"https://ocm.software/#/schema/image/1","url":"https://ocm.software/","width":512,"height":512,"caption":"OCM"},"image":{"@id":"https://ocm.software/#/schema/image/1"}},{"@type":"WebSite","@id":"https://ocm.software/#/schema/website/1","url":"https://ocm.software/","name":"Open Component Model","description":"","publisher":{"@id":"https://ocm.software/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://ocm.software/docs/guides/best-practices-with-ocm/","url":"https://ocm.software/docs/guides/best-practices-with-ocm/","name":"Best Practices","description":"","isPartOf":{"@id":"https://ocm.software/#/schema/website/1"},"about":{"@id":"https://ocm.software/#/schema/organization/1"},"datePublished":"2023-03-13T12:00:26CET","dateModified":"2023-03-13T12:00:26CET","breadcrumb":{"@id":"https://ocm.software/docs/guides/best-practices-with-ocm/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://ocm.software/docs/guides/best-practices-with-ocm/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://ocm.software/docs/guides/best-practices-with-ocm/"]}]},{"@type":"BreadcrumbList","@id":"https://ocm.software/docs/guides/best-practices-with-ocm/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://ocm.software","url":"https://ocm.software","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://ocm.software/docs/","url":"https://ocm.software/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://ocm.software/docs/guides/","url":"https://ocm.software/docs/guides/","name":"Guides"}},{"@type":"ListItem","position":5,"item":{"@id":"https://ocm.software/docs/guides/best-practices-with-ocm/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://ocm.software/#/schema/article/1","headline":"Best Practices","description":"","isPartOf":{"@id":"https://ocm.software/docs/guides/best-practices-with-ocm/"},"mainEntityOfPage":{"@id":"https://ocm.software/docs/guides/best-practices-with-ocm/"},"datePublished":"2023-03-13T12:00:26CET","dateModified":"2023-03-13T12:00:26CET","author":{"@id":"https://ocm.software/#/schema/person/2"},"publisher":{"@id":"https://ocm.software/#/schema/organization/1"},"image":{"@id":"https://ocm.software/docs/guides/best-practices-with-ocm/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://ocm.software/#/schema/person/2","name":"","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://ocm.software/docs/guides/best-practices-with-ocm/#/schema/image/2","url":null,"contentUrl":null,"caption":"Best Practices"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://ocm.software/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://ocm.software/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://ocm.software/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ocm.software/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ocm.software/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://ocm.software/site.webmanifest><script type=text/javascript async src=https://play.vidyard.com/embed/v4.js></script></head><body class="docs single"><div class=sticky-top><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label="Open Component Model"><img src=/images/logo-horizontal-white-text.png alt="Open Component Model Logo" class=header-logo></a>
<button class="btn btn-link order-0 ms-auto d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasExample aria-controls=offcanvasExample><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasExample aria-labelledby=offcanvasExampleLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasExampleLabel>Browse docs</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3><hr class="mt-1 mb-1"><ul class="list-unstyled ms-2 mt-2 mb-0"></ul><a class=docs-link href=https://ocm.software/docs/overview/><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/context/>Context</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/scope/>Scope</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/installation/>Installation</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul><a class=docs-link href=https://ocm.software/docs/demos/><h3 class="h6 text-capitalize mt-1 mb-1">Demos</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/demos/secure-software-delivery/>Secure software delivery</a></li></ul><a class="docs-link active" href=https://ocm.software/docs/guides/><h3 class="h6 text-capitalize mt-1 mb-1">Guides</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li class=ms-2><a class="docs-link active" href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul><a class=docs-link href=https://ocm.software/docs/component-descriptors/><h3 class="h6 text-capitalize mt-1 mb-1">Component Descriptors</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-2/>Version 2</a></li></ul><a class=docs-link href=https://ocm.software/docs/cli/><h3 class="h6 text-capitalize mt-1 mb-1">Command Line Client</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li><a class=docs-link href=https://ocm.software/docs/cli/add/><h4 class="h6 text-muted ms-1 mt-2 mb-1">add</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/clean/><h4 class="h6 text-muted ms-1 mt-2 mb-1">clean</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/create/><h4 class="h6 text-muted ms-1 mt-2 mb-1">create</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/describe/><h4 class="h6 text-muted ms-1 mt-2 mb-1">describe</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/cache/>cache</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/package/>package</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/download/><h4 class="h6 text-muted ms-1 mt-2 mb-1">download</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/cli/>cli</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/get/><h4 class="h6 text-muted ms-1 mt-2 mb-1">get</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/add_componentversions/ocm-labels/>ocm-labels</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/><h4 class="h6 text-muted ms-1 mt-2 mb-1">show</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/sign/><h4 class="h6 text-muted ms-1 mt-2 mb-1">sign</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/sign/hash/>hash</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/describe_package/toi-bootstrapping/>toi-bootstrapping</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/><h4 class="h6 text-muted ms-1 mt-2 mb-1">transfer</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/verify/><h4 class="h6 text-muted ms-1 mt-2 mb-1">verify</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></ul><a class=docs-link href=https://ocm.software/docs/controller-reference/><h3 class="h6 text-capitalize mt-1 mb-1">Kubernetes Controllers</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/overview/>Overview</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">OCM Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">Replication Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/><h4 class="h6 text-muted ms-1 mt-2 mb-1">API Reference</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/resource-pipeline-controller/></a></li></ul></ul></nav></aside></div></div><button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a href=/>Open Component Model</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0 align-self-end"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/docs/overview/context>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/spec/>Spec</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/project/about>Project</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/community>Community</a></li></ul><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://kubernetes.slack.com/archives/C05UWBE8R1D><svg role="img" width="36" height="36" viewBox="0 0 24 24" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 15.165a2.528 2.528.0 01-2.52 2.523A2.528 2.528.0 010 15.165a2.527 2.527.0 012.522-2.52h2.52v2.52zm1.271.0a2.527 2.527.0 012.521-2.52 2.527 2.527.0 012.521 2.52v6.313A2.528 2.528.0 018.834 24a2.528 2.528.0 01-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528.0 01-2.521-2.52A2.528 2.528.0 018.834.0a2.528 2.528.0 012.521 2.522v2.52H8.834zm0 1.271a2.528 2.528.0 012.521 2.521 2.528 2.528.0 01-2.521 2.521H2.522A2.528 2.528.0 010 8.834a2.528 2.528.0 012.522-2.521h6.312zM18.956 8.834a2.528 2.528.0 012.522-2.521A2.528 2.528.0 0124 8.834a2.528 2.528.0 01-2.522 2.521h-2.522V8.834zm-1.268.0a2.528 2.528.0 01-2.523 2.521 2.527 2.527.0 01-2.52-2.521V2.522A2.527 2.527.0 0115.165.0a2.528 2.528.0 012.523 2.522v6.312zM15.165 18.956a2.528 2.528.0 012.523 2.522A2.528 2.528.0 0115.165 24a2.527 2.527.0 01-2.52-2.522v-2.522h2.52zm0-1.268a2.527 2.527.0 01-2.52-2.523 2.526 2.526.0 012.52-2.52h6.313A2.527 2.527.0 0124 15.165a2.528 2.528.0 01-2.522 2.523h-6.313z"/></svg><small class="ms-2 d-lg-none">Slack</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/open-component-model><svg width="36" height="36" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59C5.87 15.66 6.02 15.42 6.02 15.21 6.02 15.02 6.01 14.39 6.01 13.72 4 14.09 3.48 13.23 3.32 12.78 3.23 12.55 2.84 11.84 2.5 11.65 2.22 11.5 1.82 11.13 2.49 11.12 3.12 11.11 3.57 11.7 3.72 11.94 4.44 13.15 5.59 12.81 6.05 12.6 6.12 12.08 6.33 11.73 6.56 11.53 4.78 11.33 2.92 10.64 2.92 7.58c0-.87.31-1.59.82-2.15C3.66 5.23 3.38 4.41 3.82 3.31c0 0 .67-.21 2.2.82C6.66 3.95 7.34 3.86 8.02 3.86S9.38 3.95 10.02 4.13c1.53-1.04 2.2-.82 2.2-.82C12.66 4.41 12.38 5.23 12.3 5.43 12.81 5.99 13.12 6.7 13.12 7.58c0 3.07-1.87 3.75-3.65 3.95C9.76 11.78 10.01 12.26 10.01 13.01 10.01 14.08 10 14.94 10 15.21 10 15.42 10.15 15.67 10.55 15.59 13.71 14.53 16 11.53 16 8c0-4.42-3.58-8-8-8z" fill="#f3f3f3"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul></div></div></nav></header></div><div class=container-fluid><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3><hr class="mt-1 mb-1"><ul class="list-unstyled ms-2 mt-2 mb-0"></ul><a class=docs-link href=https://ocm.software/docs/overview/><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/context/>Context</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/scope/>Scope</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/installation/>Installation</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul><a class=docs-link href=https://ocm.software/docs/demos/><h3 class="h6 text-capitalize mt-1 mb-1">Demos</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/demos/secure-software-delivery/>Secure software delivery</a></li></ul><a class="docs-link active" href=https://ocm.software/docs/guides/><h3 class="h6 text-capitalize mt-1 mb-1">Guides</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li class=ms-2><a class="docs-link active" href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul><a class=docs-link href=https://ocm.software/docs/component-descriptors/><h3 class="h6 text-capitalize mt-1 mb-1">Component Descriptors</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-2/>Version 2</a></li></ul><a class=docs-link href=https://ocm.software/docs/cli/><h3 class="h6 text-capitalize mt-1 mb-1">Command Line Client</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li><a class=docs-link href=https://ocm.software/docs/cli/add/><h4 class="h6 text-muted ms-1 mt-2 mb-1">add</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/clean/><h4 class="h6 text-muted ms-1 mt-2 mb-1">clean</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/create/><h4 class="h6 text-muted ms-1 mt-2 mb-1">create</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/describe/><h4 class="h6 text-muted ms-1 mt-2 mb-1">describe</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/cache/>cache</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/package/>package</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/download/><h4 class="h6 text-muted ms-1 mt-2 mb-1">download</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/cli/>cli</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/get/><h4 class="h6 text-muted ms-1 mt-2 mb-1">get</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/add_componentversions/ocm-labels/>ocm-labels</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/><h4 class="h6 text-muted ms-1 mt-2 mb-1">show</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/sign/><h4 class="h6 text-muted ms-1 mt-2 mb-1">sign</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/sign/hash/>hash</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/describe_package/toi-bootstrapping/>toi-bootstrapping</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/><h4 class="h6 text-muted ms-1 mt-2 mb-1">transfer</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/verify/><h4 class="h6 text-muted ms-1 mt-2 mb-1">verify</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></ul><a class=docs-link href=https://ocm.software/docs/controller-reference/><h3 class="h6 text-capitalize mt-1 mb-1">Kubernetes Controllers</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/overview/>Overview</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">OCM Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">Replication Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/><h4 class="h6 text-muted ms-1 mt-2 mb-1">API Reference</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/resource-pipeline-controller/></a></li></ul></ul></nav></aside></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav id=docs-sidebar class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar mt-0 mb-0"><ul class="list-unstyled ms-0 mt-5 mb-0"></ul><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3b878279a04dc47d60932cb294d96259 aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Overview</h3></button><div class=collapse id=section-3b878279a04dc47d60932cb294d96259><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/context/>Context</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/scope/>Scope</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/installation/>Installation</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8ade2d34ff8c8d9571bb9f13d4af8c6a aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Demos</h3></button><div class=collapse id=section-8ade2d34ff8c8d9571bb9f13d4af8c6a><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/demos/secure-software-delivery/>Secure software delivery</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-45389ee90014e0938cb09409b9a8794d aria-expanded=true><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Guides</h3></button><div class="collapse show" id=section-45389ee90014e0938cb09409b9a8794d><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li><a class="docs-link rounded active" href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-586e8b59e93b90a392c4668ce7563d70 aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Component Descriptors</h3></button><div class=collapse id=section-586e8b59e93b90a392c4668ce7563d70><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/component-descriptors/version-2/>Version 2</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4020ef13fa7b3dc5342ce3986c5a718f aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">cli-reference</h3></button><div class=collapse id=section-4020ef13fa7b3dc5342ce3986c5a718f><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-34ec78fcc91ffb1e54cd85e4a0924332 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">add</h5></button><div class=collapse id=section-34ec78fcc91ffb1e54cd85e4a0924332><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/routingslips/>routingslips</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-123402c04dcfb6625f688f771a5fc05d aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">clean</h5></button><div class=collapse id=section-123402c04dcfb6625f688f771a5fc05d><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-76ea0bebb3c22822b4f0dd9c9fd021c5 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">create</h5></button><div class=collapse id=section-76ea0bebb3c22822b4f0dd9c9fd021c5><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0d16430e9f0aa8879ba9dac2540543fc aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">describe</h5></button><div class=collapse id=section-0d16430e9f0aa8879ba9dac2540543fc><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/cache/>cache</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/package/>package</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-fd456406745d816a45cae554c788e754 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">download</h5></button><div class=collapse id=section-fd456406745d816a45cae554c788e754><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/cli/>cli</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b5eda0a74558a342cf659187f06f746f aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">get</h5></button><div class=collapse id=section-b5eda0a74558a342cf659187f06f746f><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/routingslips/>routingslips</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul></div></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add_componentversions/ocm-labels/>ocm-labels</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-a7dd12b1dab17d25467b0b0a4c8d4a92 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">show</h5></button><div class=collapse id=section-a7dd12b1dab17d25467b0b0a4c8d4a92><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-04b29480233f4def5c875875b6bdc3b1 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">sign</h5></button><div class=collapse id=section-04b29480233f4def5c875875b6bdc3b1><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/sign/hash/>hash</a></li></ul></div></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe_package/toi-bootstrapping/>toi-bootstrapping</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-84a0f3455dcca894ace136be62efa292 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">transfer</h5></button><div class=collapse id=section-84a0f3455dcca894ace136be62efa292><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e8418d1d706cd73548f9f16f1d55ad6e aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">verify</h5></button><div class=collapse id=section-e8418d1d706cd73548f9f16f1d55ad6e><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></div></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8953fee62c09283faf60084f6db3826e aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Kubernetes Controllers</h3></button><div class=collapse id=section-8953fee62c09283faf60084f6db3826e><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-77c54d2a9106c22e3bc203d8b35bd627 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">OCM Controller</h5></button><div class=collapse id=section-77c54d2a9106c22e3bc203d8b35bd627><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-be2844c305a730ff0fbae91208e810c3 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">Replication Controller</h5></button><div class=collapse id=section-be2844c305a730ff0fbae91208e810c3><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-05b017e42952fddf972dcdfddede5740 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">API Reference</h5></button><div class=collapse id=section-05b017e42952fddf972dcdfddede5740><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/resource-pipeline-controller/></a></li></ul></div></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#separate-between-build-and-publish>Separate between Build and Publish</a></li><li><a href=#building-multi-arch-images>Building multi-arch images</a></li><li><a href=#using-makefiles>Using Makefiles</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#templating-the-resources>Templating the resources</a></li></ul></li><li><a href=#pipeline-integration>Pipeline integration</a></li><li><a href=#static-and-dynamic-variable-substitution>Static and Dynamic Variable Substitution</a></li><li><a href=#debugging-explain-the-blobs-directory>Debugging: Explain the blobs directory</a></li><li><a href=#self-contained-transport-archives>Self-contained transport archives</a></li><li><a href=#cicd-integration>CICD integration</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#separate-between-build-and-publish>Separate between Build and Publish</a></li><li><a href=#building-multi-arch-images>Building multi-arch images</a></li><li><a href=#using-makefiles>Using Makefiles</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#templating-the-resources>Templating the resources</a></li></ul></li><li><a href=#pipeline-integration>Pipeline integration</a></li><li><a href=#static-and-dynamic-variable-substitution>Static and Dynamic Variable Substitution</a></li><li><a href=#debugging-explain-the-blobs-directory>Debugging: Explain the blobs directory</a></li><li><a href=#self-contained-transport-archives>Self-contained transport archives</a></li><li><a href=#cicd-integration>CICD integration</a></li></ul></nav></div></nav><main class="docs-content container-xxl col-lg-11 col-xl-9"><h1>Best Practices</span></h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#separate-between-build-and-publish>Separate between Build and Publish</a></li><li><a href=#building-multi-arch-images>Building multi-arch images</a></li><li><a href=#using-makefiles>Using Makefiles</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#templating-the-resources>Templating the resources</a></li></ul></li><li><a href=#pipeline-integration>Pipeline integration</a></li><li><a href=#static-and-dynamic-variable-substitution>Static and Dynamic Variable Substitution</a></li><li><a href=#debugging-explain-the-blobs-directory>Debugging: Explain the blobs directory</a></li><li><a href=#self-contained-transport-archives>Self-contained transport archives</a></li><li><a href=#cicd-integration>CICD integration</a></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#separate-between-build-and-publish>Separate between Build and Publish</a></li><li><a href=#building-multi-arch-images>Building multi-arch images</a></li><li><a href=#using-makefiles>Using Makefiles</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#templating-the-resources>Templating the resources</a></li></ul></li><li><a href=#pipeline-integration>Pipeline integration</a></li><li><a href=#static-and-dynamic-variable-substitution>Static and Dynamic Variable Substitution</a></li><li><a href=#debugging-explain-the-blobs-directory>Debugging: Explain the blobs directory</a></li><li><a href=#self-contained-transport-archives>Self-contained transport archives</a></li><li><a href=#cicd-integration>CICD integration</a></li></ul></nav></div></nav><p>This chapter contains guidelines for common scenarios how to work with the Open Component Model.</p><ul><li><a href=#separate-between-build-and-publish>Separate between Build and Publish</a></li><li><a href=#building-multi-arch-images>Building multi-arch images</a></li><li><a href=#using-makefiles>Using Makefiles</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#templating-the-resources>Templating the resources</a></li></ul></li><li><a href=#pipeline-integration>Pipeline integration</a></li><li><a href=#static-and-dynamic-variable-substitution>Static and Dynamic Variable Substitution</a></li><li><a href=#debugging-explain-the-blobs-directory>Debugging: Explain the blobs directory</a></li><li><a href=#self-contained-transport-archives>Self-contained transport archives</a></li><li><a href=#cicd-integration>CICD integration</a></li></ul><h2 id=separate-between-build-and-publish>Separate between Build and Publish <a href=#separate-between-build-and-publish class=anchor aria-hidden=true>#</a></h2><p>Typical automated builds have access to the complete internet ecosystem. This involves
downloading of content required for a build (e.g. <code>go mod tidy</code>), but also the upload
of build results to repositories (e.g. OCI image registries).</p><p>For enterprise build this approach has several disadvantages:</p><ul><li>there is no control what kind of artifacts are downloaded from the internet.</li><li>there is no guarantee that these artifacts are still available tomorrow, or they might
be temporarily not accessible.</li><li>the build procedure needs write permissions to external repositories.</li></ul><p>The first problem might be acceptable, because the build results may be analyzed by scanners
later to figure out what has been packaged, and triage the results in an asynchronous
step later on.</p><p>The second problem is more severe, which could be solved by mirroring the required
artifacts and instrument the build somehow (technology dependent) to use the local mirror.
Such a mirror could also give back to control the possible input vector of a build by
restricting the access to the use of the mirror.</p><p>This third problems might provide severe security risks, because the build procedure
as well as the downloaded artifacts may be used to catch registry credentials or at least
corrupt the content of those repositories.</p><p>This could be avoided by establishing a contract between the build procedure of a
component/project and the build system, providing the build result as a local file
or file-structure. This is then taken by the build system to push content wherever
it should be pushed to. This way the execution of the build procedure does not need
write permissions to any repository, because it never pushes build results.</p><p>The Open Component Model supports such processes by supporting filesystem based
OCM repositories, which are able to host any type of content, regardless of its
technology. The task of the build then is to provide such a <em>CTF</em> archive for the
OCM component versions generated by the build. This archive can then be
used by the build-system to do whatever is required to make the content accessible
by others.</p><p>The composition of such archives is described in the <a href=../getting-started-with-ocm>Getting Started Section</a>.</p><p>To secure further processes, a <em>certified build-system</em> could even sign the content with
its build system certificate to enable followup-processes to verify that involved component
versions are provided by accepted and well-known processes.</p><h2 id=building-multi-arch-images>Building multi-arch images <a href=#building-multi-arch-images class=anchor aria-hidden=true>#</a></h2><p>At the time of writing this guide Docker is not able to build multi-architecture (multi-arch)
images natively. Instead, the <code>buildx</code> plugin is used. However, this implies building and pushing
images in one step to a remote container registry as the local docker image store does not
support multi-arch images.</p><p>The OCM CLI has therefore some built-in support for dealing with multi-arch images during the
component version composition (<a href=https://github.com/open-component-model/ocm/docs/reference/ocm_add_resources.md><code>ocm add resources</code></a>). This allows
building all artifacts locally and push them in a separate step to a container registry. This
is done by building single-arch images in a first step (still using <code>buildx</code> for cross-platform
building). In a second step all images are bundled into a multi-arch image, which is stored as
local artifact in a component (CA) or common transport (CTF)
archive. This archive can be processed as usual (e.g. for signing or transfer to other locations).
When pushed to an image registry multi-arch images are generated with a multi-arch-image manifest.</p><p>The following steps illustrate this procedure. For a simple project with a Go binary and a
helm-chart assume the following file structure:</p><pre><code class=language-shell> tree .
.
├── Dockerfile
├── go.mod
├── helmchart
│   ├── Chart.yaml
│   ├── templates
│   │   ├── ...
│   └── values.yaml
└── main.go
</code></pre><p>The dockerfile has the following content:</p><pre><code class=language-Dockerfile>FROM golang:1.19 AS builder

WORKDIR /app
COPY go.mod ./
COPY main.go ./
# RUN go mod download
RUN go build -o /helloserver main.go

# Create a new release build stage
FROM gcr.io/distroless/base-debian10

# Set the working directory to the root directory path
WORKDIR /
# Copy over the binary built from the previous stage
COPY --from=builder /helloserver /helloserver

ENTRYPOINT [&quot;/helloserver&quot;]
</code></pre><p>Now we want to build images for two platforms using docker and buildx. Note the <code>--load</code> option for
<code>buildx</code> to store the image in the local docker store. Note the architecture suffix in the tag to be
able to distinguish the images for the different platforms. Note also that the tag has a different
syntax than the <code>--platform</code> argument for <code>buildx</code> as slashes are not allowed in tags.</p><pre><code class=language-shell>$ TAG_PREFIX=eu.gcr.io/my-project/acme # path to you OCI registry
$ PLATFORM=linux/amd64
$ VERSION=0.1.0

$ docker buildx build --load -t ${TAG_PREFIX}/simpleserver:0.1.0-linux-amd64 --platform linux/amd64 .
[+] Building 54.4s (14/14) FINISHED
 =&gt; [internal] load build definition from Dockerfile                                                                          0.0s
 =&gt; =&gt; transferring dockerfile: 660B                                                                                          0.0s
 =&gt; [internal] load .dockerignore                                                                                             0.0s
 =&gt; =&gt; transferring context: 2B                                                                                               0.0s
 =&gt; [internal] load metadata for gcr.io/distroless/base-debian10:latest                                                       1.6s
 =&gt; [internal] load metadata for docker.io/library/golang:1.19                                                                1.2s
 =&gt; [builder 1/5] FROM docker.io/library/golang:1.19@sha256:dc76ef03e54c34a00dcdca81e55c242d24b34d231637776c4bb5c1a8e851425  49.2s
 =&gt; =&gt; resolve docker.io/library/golang:1.19@sha256:dc76ef03e54c34a00dcdca81e55c242d24b34d231637776c4bb5c1a8e8514253          0.0s
 =&gt; =&gt; sha256:14a70245b07c7f5056bdd90a3d93e37417ec26542def5a37ac8f19e437562533 156B / 156B                                    0.2s
 =&gt; =&gt; sha256:a2b47720d601b6c6c6e7763b4851e25475118d80a76be466ef3aa388abf2defd 148.91MB / 148.91MB                           46.3s
 =&gt; =&gt; sha256:52908dc1c386fab0271a2b84b6ef4d96205a98a8c8801169554767172e45d8c7 85.97MB / 85.97MB                             42.9s
 =&gt; =&gt; sha256:195ea6a58ca87a18477965a6e6a8623112bde82c5b568a29c56ce4581b6e6695 54.59MB / 54.59MB                             33.8s
 =&gt; =&gt; sha256:c85a0be79bfba309d1f05dc40b447aa82b604593531fed1e7e12e4bef63483a5 10.88MB / 10.88MB                              3.4s
 =&gt; =&gt; sha256:e4e46864aba2e62ba7c75965e4aa33ec856ee1b1074dda6b478101c577b63abd 5.16MB / 5.16MB                                1.5s
 =&gt; =&gt; sha256:a8ca11554fce00d9177da2d76307bdc06df7faeb84529755c648ac4886192ed1 55.04MB / 55.04MB                             19.3s
 =&gt; =&gt; extracting sha256:a8ca11554fce00d9177da2d76307bdc06df7faeb84529755c648ac4886192ed1                                     1.1s
 =&gt; =&gt; extracting sha256:e4e46864aba2e62ba7c75965e4aa33ec856ee1b1074dda6b478101c577b63abd                                     0.1s
 =&gt; =&gt; extracting sha256:c85a0be79bfba309d1f05dc40b447aa82b604593531fed1e7e12e4bef63483a5                                     0.1s
 =&gt; =&gt; extracting sha256:195ea6a58ca87a18477965a6e6a8623112bde82c5b568a29c56ce4581b6e6695                                     1.1s
 =&gt; =&gt; extracting sha256:52908dc1c386fab0271a2b84b6ef4d96205a98a8c8801169554767172e45d8c7                                     1.5s
 =&gt; =&gt; extracting sha256:a2b47720d601b6c6c6e7763b4851e25475118d80a76be466ef3aa388abf2defd                                     2.8s
 =&gt; =&gt; extracting sha256:14a70245b07c7f5056bdd90a3d93e37417ec26542def5a37ac8f19e437562533                                     0.0s
 =&gt; [stage-1 1/3] FROM gcr.io/distroless/base-debian10@sha256:101798a3b76599762d3528635113f0466dc9655ecba82e8e33d410e2bf5cd  30.7s
 =&gt; =&gt; resolve gcr.io/distroless/base-debian10@sha256:101798a3b76599762d3528635113f0466dc9655ecba82e8e33d410e2bf5cd319        0.0s
 =&gt; =&gt; sha256:f291067d32d8d06c3b996ba726b9aa93a71f6f573098880e05d16660cfc44491 8.12MB / 8.12MB                               30.6s
 =&gt; =&gt; sha256:2445dbf7678f5ec17f5654ac2b7ad14d7b1ea3af638423fc68f5b38721f25fa4 657.02kB / 657.02kB                            1.3s
 =&gt; =&gt; extracting sha256:2445dbf7678f5ec17f5654ac2b7ad14d7b1ea3af638423fc68f5b38721f25fa4                                     0.1s
 =&gt; =&gt; extracting sha256:f291067d32d8d06c3b996ba726b9aa93a71f6f573098880e05d16660cfc44491                                     0.1s
 =&gt; [internal] load build context                                                                                             0.1s
 =&gt; =&gt; transferring context: 575B                                                                                             0.0s
 =&gt; [builder 2/5] WORKDIR /app                                                                                                0.1s
 =&gt; [builder 3/5] COPY go.mod ./                                                                                              0.0s
 =&gt; [builder 4/5] COPY main.go ./                                                                                             0.0s
 =&gt; [builder 5/5] RUN go build -o /helloserver main.go                                                                        2.4s
 =&gt; [stage-1 2/3] COPY --from=builder /helloserver /helloserver                                                               0.0s
 =&gt; exporting to oci image format                                                                                             0.8s
 =&gt; =&gt; exporting layers                                                                                                       0.2s
 =&gt; =&gt; exporting manifest sha256:04d69fc3245757d327d96b1a83b7a64543d970953c61d1014ae6980ed8b3ba2a                             0.0s
 =&gt; =&gt; exporting config sha256:08641d64f612661a711587b07cfeeb6d2804b97998cfad85864a392c1aabcd06                               0.0s
 =&gt; =&gt; sending tarball                                                                                                        0.6s
 =&gt; importing to docker
</code></pre><p>Repeat this command for the second platform:</p><pre><code class=language-shell>$ docker buildx build --load -t ${TAG_PREFIX}/simpleserver:0.1.0-linux-arm64 --platform linux/arm64 .
docker buildx build --load -t ${TAG_PREFIX}/simpleserver:0.1.0-linux-arm64 --platform linux/arm64 .
[+] Building 40.1s (14/14) FINISHED
 =&gt; [internal] load .dockerignore                                                                                             0.0s
 =&gt; =&gt; transferring context: 2B                                                                                               0.0s
 =&gt; [internal] load build definition from Dockerfile                                                                          0.0s
 =&gt; =&gt; transferring dockerfile: 660B                                                                                          0.0s
 =&gt; [internal] load metadata for gcr.io/distroless/base-debian10:latest                                                       1.0s
 =&gt; [internal] load metadata for docker.io/library/golang:1.19                                                                1.1s
 =&gt; [builder 1/5] FROM docker.io/library/golang:1.19@sha256:dc76ef03e54c34a00dcdca81e55c242d24b34d231637776c4bb5c1a8e851425  37.7s
 =&gt; =&gt; resolve docker.io/library/golang:1.19@sha256:dc76ef03e54c34a00dcdca81e55c242d24b34d231637776c4bb5c1a8e8514253          0.0s
 =&gt; =&gt; sha256:cd807e8b483974845eabbdbbaa4bb3a66f74facd8c061e01e923e9f1da608271 157B / 157B                                    0.2s
 =&gt; =&gt; sha256:fecd6ba4b3f93b6c90f4058b512f1b0a44223ccb3244f0049b16fe2c1b41cf45 115.13MB / 115.13MB                           35.6s
 =&gt; =&gt; sha256:4fb255e3f99867ec7a2286dfbbef990491cde0a5d226d92be30bad4f9e917fa4 81.37MB / 81.37MB                             31.8s
 =&gt; =&gt; sha256:426e8acfed2a5373bd99b22b5a968d55a148e14bc0e0f51c5cf0d779afefe291 54.68MB / 54.68MB                             26.7s
 =&gt; =&gt; sha256:3d7b1480fa4dae5cbbb7d091c46ae0ae52f501418d4cfeb849b87023364e2564 10.87MB / 10.87MB                              3.0s
 =&gt; =&gt; sha256:a3e29af4daf3531efcc63588162e8bdcf3434aa5d72df4eabeb5e20c6695e303 5.15MB / 5.15MB                                1.3s
 =&gt; =&gt; sha256:077c13527d405646e2f6bb426e04716ae4f8dd2fdd8966dcb0194564a2b57896 53.70MB / 53.70MB                             13.3s
 =&gt; =&gt; extracting sha256:077c13527d405646e2f6bb426e04716ae4f8dd2fdd8966dcb0194564a2b57896                                     0.9s
 =&gt; =&gt; extracting sha256:a3e29af4daf3531efcc63588162e8bdcf3434aa5d72df4eabeb5e20c6695e303                                     0.3s
 =&gt; =&gt; extracting sha256:3d7b1480fa4dae5cbbb7d091c46ae0ae52f501418d4cfeb849b87023364e2564                                     0.1s
 =&gt; =&gt; extracting sha256:426e8acfed2a5373bd99b22b5a968d55a148e14bc0e0f51c5cf0d779afefe291                                     1.2s
 =&gt; =&gt; extracting sha256:4fb255e3f99867ec7a2286dfbbef990491cde0a5d226d92be30bad4f9e917fa4                                     1.4s
 =&gt; =&gt; extracting sha256:fecd6ba4b3f93b6c90f4058b512f1b0a44223ccb3244f0049b16fe2c1b41cf45                                     2.0s
 =&gt; =&gt; extracting sha256:cd807e8b483974845eabbdbbaa4bb3a66f74facd8c061e01e923e9f1da608271                                     0.0s
 =&gt; [stage-1 1/3] FROM gcr.io/distroless/base-debian10@sha256:101798a3b76599762d3528635113f0466dc9655ecba82e8e33d410e2bf5cd  25.7s
 =&gt; =&gt; resolve gcr.io/distroless/base-debian10@sha256:101798a3b76599762d3528635113f0466dc9655ecba82e8e33d410e2bf5cd319        0.0s
 =&gt; =&gt; sha256:21d6a6c3921f47fb0a96eb028b4c3441944a6e5a44b30cd058425ccc66279760 7.13MB / 7.13MB                               25.5s
 =&gt; =&gt; sha256:7d441aeb75fe3c941ee4477191c6b19edf2ad8310bac7356a799c20df198265c 657.02kB / 657.02kB                            1.3s
 =&gt; =&gt; extracting sha256:7d441aeb75fe3c941ee4477191c6b19edf2ad8310bac7356a799c20df198265c                                     0.1s
 =&gt; =&gt; extracting sha256:21d6a6c3921f47fb0a96eb028b4c3441944a6e5a44b30cd058425ccc66279760                                     0.1s
 =&gt; [internal] load build context                                                                                             0.0s
 =&gt; =&gt; transferring context: 54B                                                                                              0.0s
 =&gt; [builder 2/5] WORKDIR /app                                                                                                0.2s
 =&gt; [builder 3/5] COPY go.mod ./                                                                                              0.0s
 =&gt; [builder 4/5] COPY main.go ./                                                                                             0.0s
 =&gt; [builder 5/5] RUN go build -o /helloserver main.go                                                                        0.3s
 =&gt; [stage-1 2/3] COPY --from=builder /helloserver /helloserver                                                               0.0s
 =&gt; exporting to oci image format                                                                                             0.5s
 =&gt; =&gt; exporting layers                                                                                                       0.2s
 =&gt; =&gt; exporting manifest sha256:267ed1266b2b0ed74966e72d4ae8a2dfcf77777425d32a9a46f0938c962d9600                             0.0s
 =&gt; =&gt; exporting config sha256:67102364e254bf5a8e58fa21ea56eb40645851d844f5c4d9651b4af7a40be780                               0.0s
 =&gt; =&gt; sending tarball                                                                                                        0.3s
 =&gt; importing to docker
</code></pre><p>Check that the images were created correctly:</p><pre><code class=language-shell>$ docker image ls
REPOSITORY                                              TAG                 IMAGE ID       CREATED              SIZE
eu.gcr.io/acme/simpleserver   0.1.0-linux-arm64   67102364e254   6 seconds ago        22.4MB
eu.gcr.io/acme/simpleserver   0.1.0-linux-amd64   08641d64f612   About a minute ago   25.7MB
</code></pre><p>In the next step we create a component archive and a transport archive</p><pre><code class=language-shell>$ PROVIDER=acme
$ COMPONENT=github.com/$(PROVIDER)/simpleserver
$ VERSION=0.1.0
$ mkdir gen
$ ocm create ca ${COMPONENT} ${VERSION} --provider ${PROVIDER} --file gen/ca
</code></pre><p>Create the file <code>resources.yaml</code>. Note the variants in the image input and the type <code>dockermulti</code>:</p><pre><code class=language-yaml>---
name: chart
type: helmChart
input:
  type: helm
  path: helmchart
---
name: image
type: ociImage
version: 0.1.0
input:
  type: dockermulti
  repository: eu.gcr.io/acme/simpleserver
  variants:
  - &quot;eu.gcr.io/acme/simpleserver:0.1.0-linux-amd64&quot;
  - &quot;eu.gcr.io/acme/simpleserver:0.1.0-linux-arm64&quot;
</code></pre><p>The input type <code>dockermulti</code> adds a multi-arch image composed by the given dedicated images from the local docker
image store as local artifact to the component archive.</p><p>Add the described resources to your component archive:</p><pre><code class=language-shell>$ ocm add resources ./gen/ca resources.yaml
processing resources.yaml...
  processing document 1...
    processing index 1
  processing document 2...
    processing index 1
found 2 resources
adding resource helmChart: &quot;name&quot;=&quot;chart&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
adding resource ociImage: &quot;name&quot;=&quot;image&quot;,&quot;version&quot;=&quot;0.1.0&quot;...
  image 0: eu.gcr.io/acme/simpleserver:0.1.0-linux-amd64
  image 1: eu.gcr.io/acme/simpleserver:0.1.0-linux-arm64
  image 2: INDEX
locator: github.com/acme/simpleserver, repo: eu.gcr.io/acme/simpleserver, version 0.1.0
</code></pre><details><summary>What happened?</summary><p>The input type <code>dockermulti</code> is used to compose a multi-arch image on-the fly. Like
the input type <code>docker</code> is reads images from the local docker daemon. In contrast to
this command you can list multiple images, created for different platforms, for which
an OCI index manifest is created to describe a multi-arch image. The complete set
of blobs is then packaged as artifact set archive and put as single resource into
the component version.</p><p>The resulting <code>component-descriptor.yaml</code> in <code>gen/ca</code> is:</p><pre><code class=language-shell>component:
  componentReferences: []
  name: github.com/acme/simpleserver
  provider: acme
  repositoryContexts: []
  resources:
  - access:
      localReference: sha256.9dd0f2cbae3b8e6eb07fa947c05666d544c0419a6e44bd607e9071723186333b
      mediaType: application/vnd.oci.image.manifest.v1+tar+gzip
      referenceName: github.com/acme/simpleserver/helloserver:0.1.0
      type: localBlob
    name: chart
    relation: local
    type: helmChart
    version: 0.1.0
  - access:
      localReference: sha256.4e26c7dd46e13c9b1672e4b28a138bdcb086e9b9857b96c21e12839827b48c0c
      mediaType: application/vnd.oci.image.index.v1+tar+gzip
      referenceName: github.com/acme/simpleserver/eu.gcr.io/acme/simpleserver:0.1.0
      type: localBlob
    name: image
    relation: local
    type: ociImage
    version: 0.1.0
  sources: []
  version: 0.1.0
meta:
  schemaVersion: v2
</code></pre><p>Note that there is only one resource of type <code>image</code> with media-type <code>application/vnd.oci.image.index.v1+tar+gzip</code>
which is the standard media type for multiarch-images.</p><pre><code class=language-shell>$ ls -l gen/ca/blobs
total 24M
-rw-r--r-- 1 d058463 staff  24M Dec  1 09:50 sha256.4e26c7dd46e13c9b1672e4b28a138bdcb086e9b9857b96c21e12839827b48c0c
-rw-r--r-- 1 d058463 staff 4.7K Dec  1 09:50 sha256.9dd0f2cbae3b8e6eb07fa947c05666d544c0419a6e44bd607e9071723186333b
</code></pre><p>The file sha256.4e26&mldr; contains the multi-arch image packaged as OCI artifact set:</p><pre><code class=language-shell>$ tar tvf gen/ca/blobs/sha256.4e26c7dd46e13c9b1672e4b28a138bdcb086e9b9857b96c21e12839827b48c0c
-rw-r--r--  0 0      0         741 Jan  1  2022 index.json
-rw-r--r--  0 0      0          38 Jan  1  2022 oci-layout
drwxr-xr-x  0 0      0           0 Jan  1  2022 blobs
-rw-r--r--  0 0      0     3051520 Jan  1  2022 blobs/sha256.05ef21d763159987b9ec5cfb3377a61c677809552dcac3301c0bde4e9fd41bbb
-rw-r--r--  0 0      0         723 Jan  1  2022 blobs/sha256.117f12f0012875471168250f265af9872d7de23e19f0d4ef05fbe99a1c9a6eb3
-rw-r--r--  0 0      0     6264832 Jan  1  2022 blobs/sha256.1496e46acd50a8a67ce65bac7e7287440071ad8d69caa80bcf144892331a95d3
-rw-r--r--  0 0      0     6507520 Jan  1  2022 blobs/sha256.66817c8096ad97c6039297dc984ebc17c5ac9325200bfa9ddb555821912adbe4
-rw-r--r--  0 0      0         491 Jan  1  2022 blobs/sha256.75a096351fe96e8be1847a8321bd66535769c16b2cf47ac03191338323349355
-rw-r--r--  0 0      0     3051520 Jan  1  2022 blobs/sha256.77192cf194ddc77d69087b86b763c47c7f2b0f215d0e4bf4752565cae5ce728d
-rw-r--r--  0 0      0        1138 Jan  1  2022 blobs/sha256.91018e67a671bbbd7ab875c71ca6917484ce76cde6a656351187c0e0e19fe139
-rw-r--r--  0 0      0    17807360 Jan  1  2022 blobs/sha256.91f7bcfdfda81b6c6e51b8e1da58b48759351fa4fae9e6841dd6031528f63b4a
-rw-r--r--  0 0      0        1138 Jan  1  2022 blobs/sha256.992b3b72df9922293c05f156f0e460a220bf601fa46158269ce6b7d61714a084
-rw-r--r--  0 0      0    14755840 Jan  1  2022 blobs/sha256.a83c9b56bbe0f6c26c4b1d86e6de3a4862755d208c9dfae764f64b210eafa58c
-rw-r--r--  0 0      0         723 Jan  1  2022 blobs/sha256.e624040295fb78a81f4b4b08b43b4de419f31f21074007df8feafc10dfb654e6

$ tar xvf gen/ca/blobs/sha256.4e26c7dd46e13c9b1672e4b28a138bdcb086e9b9857b96c21e12839827b48c0c -O - index.json | jq .
x index.json
{
  &quot;schemaVersion&quot;: 2,
  &quot;mediaType&quot;: &quot;application/vnd.oci.image.index.v1+json&quot;,
  &quot;manifests&quot;: [
    {
      &quot;mediaType&quot;: &quot;application/vnd.oci.image.manifest.v1+json&quot;,
      &quot;digest&quot;: &quot;sha256:e624040295fb78a81f4b4b08b43b4de419f31f21074007df8feafc10dfb654e6&quot;,
      &quot;size&quot;: 723
    },
    {
      &quot;mediaType&quot;: &quot;application/vnd.oci.image.manifest.v1+json&quot;,
      &quot;digest&quot;: &quot;sha256:117f12f0012875471168250f265af9872d7de23e19f0d4ef05fbe99a1c9a6eb3&quot;,
      &quot;size&quot;: 723
    },
    {
      &quot;mediaType&quot;: &quot;application/vnd.oci.image.index.v1+json&quot;,
      &quot;digest&quot;: &quot;sha256:75a096351fe96e8be1847a8321bd66535769c16b2cf47ac03191338323349355&quot;,
      &quot;size&quot;: 491,
      &quot;annotations&quot;: {
        &quot;org.opencontainers.image.ref.name&quot;: &quot;0.1.0&quot;,
        &quot;software.ocm/tags&quot;: &quot;0.1.0&quot;
      }
    }
  ],
  &quot;annotations&quot;: {
    &quot;software.ocm/main&quot;: &quot;sha256:75a096351fe96e8be1847a8321bd66535769c16b2cf47ac03191338323349355&quot;
  }
}
</code></pre></details><p>You can create a transport archive from the component archive.</p><pre><code class=language-shell>cm transfer ca gen/ca gen/ctf
transferring version &quot;github.com/acme/simpleserver:0.1.0&quot;...
...resource 0(github.com/acme/simpleserver/helloserver:0.1.0)...
...resource 1(github.com/acme/simpleserver/eu.gcr.io/acme/simpleserver:0.1.0)...
...adding component version...
</code></pre><p>Or you can push it directly to the OCM repository:</p><pre><code class=language-shell>$ OCMREPO=ghcr.io/${PROVIDER}
$ ocm transfer ca gen/ca $OCMREPO
transferring version &quot;github.com/acme/simpleserver:0.1.0&quot;...
...resource 0(github.com/acme/simpleserver/helloserver:0.1.0)...
...resource 1(github.com/acme/simpleserver/eu.gcr.io/acme/simpleserver:0.1.0)...
...adding component version...
</code></pre><p>The repository then should contain three additional artifacts. Depending on the OCI registry and
their corresponding UIs you may see that the uploaded OCI image is a multi-arch-image. For example on
GitHub packages you can see under <code>OS/Arch</code> that there are two platforms <code>linux/amd64</code> and
<code>linux/arm64</code></p><p>For better automation and reuse you may consider templating resource files and makefiles (see below)</p><h2 id=using-makefiles>Using Makefiles <a href=#using-makefiles class=anchor aria-hidden=true>#</a></h2><p>Developing with the Open Component Model usually is an iterative process of building artifacts,
generating component descriptors, analyzing them and publishing them. To simplify and speedup this
process it should be automated using a build tool. One option is to use a <code>makefile</code>.
The following example can be used as a starting point and can be modified according to your needs.</p><p>In this example we will automated the example shown in the sections before:</p><ul><li>Create a multi arch image from Go sources from a Git repository with docker</li><li>Packaging the image and a helm chart into a common transport archive</li><li>Signing and publishing the build result</li></ul><h3 id=prerequisites>Prerequisites <a href=#prerequisites class=anchor aria-hidden=true>#</a></h3><ul><li>The ocm CLI must be installed and in the PATH</li><li>The Makefile is in the top-level folder of a Git project</li><li>Operating system is Unix</li><li>A sub-directory <code>local</code> can be used for local settings e.g. environment varibles, RSA keys, &mldr;</li><li>A sub-directory <code>gen</code> will be used for generated artifacts from the make build</li><li>It is recommended to add <code>local/</code> and <code>gen/</code> to the <code>.gitignore</code> file</li></ul><p>We use the following file system layout for this example:</p><pre><code class=language-shell>$ tree .
.
├── Dockerfile
├── LICENSE
├── Makefile
├── README.md
├── go.mod
├── helmchart
│   ├── Chart.yaml
│   ├── templates
│   │   ├── NOTES.txt
│   │   ├── _helpers.tpl
│   │   ├── deployment.yaml
│   │   ├── hpa.yaml
│   │   ├── ingress.yaml
│   │   ├── service.yaml
│   │   ├── serviceaccount.yaml
│   │   └── tests
│   │       └── test-connection.yaml
│   └── values.yaml
├── local
│   └── env.sh
├── main.go
├── resources.yaml
└── VERSION
</code></pre><details><summary>This makefile can be used</summary><pre><code class=language-makefile>NAME      ?= simpleserver
PROVIDER  ?= acme.org
GITHUBORG ?= acme
IMAGE     = ghcr.io/$(GITHUBORG)/demo/$(NAME)
COMPONENT = $(PROVIDER)/demo/$(NAME)
OCMREPO   ?= ghcr.io/$(GITHUBORG)/ocm
MULTI     ?= true
PLATFORMS ?= linux/amd64 linux/arm64
REPO_ROOT           = .
VERSION             = $(shell git describe --tags --exact-match 2&gt;/dev/null|| echo &quot;$$(cat $(REPO_ROOT)/VERSION)&quot;)
COMMIT              = $(shell git rev-parse HEAD)
EFFECTIVE_VERSION   = $(VERSION)-$(COMMIT)
GIT_TREE_STATE      := $(shell [ -z &quot;$(git status --porcelain 2&gt;/dev/null)&quot; ] &amp;&amp; echo clean || echo dirty)
GEN = ./gen
OCM = ocm

CHART_SRCS=$(shell find helmchart -type f)
GO_SRCS=$(shell find . -name \*.go -type f)

ifeq ($(MULTI),true)
FLAGSUF     = .multi
endif

.PHONY: build
build: $(GEN)/build

.PHONY: version
version:
	@echo $(VERSION)

.PHONY: ca
ca: $(GEN)/ca

$(GEN)/ca: $(GEN)/.exists $(GEN)/image.$(NAME)$(FLAGSUF) resources.yaml $(CHART_SRCS)
	$(OCM) create ca -f $(COMPONENT) &quot;$(VERSION)&quot; --provider $(PROVIDER) --file $(GEN)/ca
	$(OCM) add resources --templater spiff $(GEN)/ca COMMIT=&quot;$(COMMIT)&quot; VERSION=&quot;$(VERSION)&quot; \
		IMAGE=&quot;$(IMAGE):$(VERSION)&quot; PLATFORMS=&quot;$(PLATFORMS)&quot; MULTI=$(MULTI) resources.yaml
	@touch $(GEN)/ca

$(GEN)/build: $(GO_SRCS)
	go build .
	@touch $(GEN)/build

.PHONY: image
image: $(GEN)/image.$(NAME)

$(GEN)/image.$(NAME): $(GEN)/.exists Dockerfile $(OCMSRCS)
	docker build -t $(IMAGE):$(VERSION) --file Dockerfile $(COMPONENT_ROOT) .;
	@touch $(GEN)/image.$(NAME)

.PHONY: multi
multi: $(GEN)/image.$(NAME).multi

$(GEN)/image.$(NAME).multi: $(GEN)/.exists Dockerfile $(GO_SRCS)
	echo &quot;Building Multi $(PLATFORMS)&quot;
	for i in $(PLATFORMS); do \
	tag=$$(echo $$i | sed -e s:/:-:g); \
	echo &quot;Building platform $$i with tag: $$tag&quot;; \
	docker buildx build --load -t $(IMAGE):$(VERSION)-$$tag --platform $$i .; \
	done
	@touch $(GEN)/image.$(NAME).multi

.PHONY: ctf
ctf: $(GEN)/ctf

$(GEN)/ctf: $(GEN)/ca
	@rm -rf $(GEN)/ctf
	$(OCM) transfer ca $(GEN)/ca $(GEN)/ctf
	touch $(GEN)/ctf

.PHONY: push
push: $(GEN)/ctf $(GEN)/push.$(NAME)

$(GEN)/push.$(NAME): $(GEN)/ctf
	$(OCM) transfer ctf -f $(GEN)/ctf $(OCMREPO)
	@touch $(GEN)/push.$(NAME)

.PHONY: transport
transport:
ifneq ($(TARGETREPO),)
	$(OCM) transfer component -Vc  $(OCMREPO)//$(COMPONENT):$(VERSION) $(TARGETREPO)
else
	@echo &quot;Cannot transport no TARGETREPO defined as destination&quot; &amp;&amp; exit 1
endif

$(GEN)/.exists:
	@mkdir -p $(GEN)
	@touch $@

.PHONY: info
info:
	@echo &quot;VERSION:  $(VERSION)&quot;
	@echo &quot;COMMIT:   $(COMMIT)&quot;
	@echo &quot;TREESTATE:   $(GIT_TREE_STATE)&quot;

.PHONY: describe
describe: $(GEN)/ctf
	ocm get resources --lookup $(OCMREPO) -r -o treewide $(GEN)/ctf

.PHONY: descriptor
descriptor: $(GEN)/ctf
	ocm get component -S v3alpha1 -o yaml $(GEN)/ctf

.PHONY: clean
clean:
	rm -rf $(GEN)
</code></pre></details><p>It supports the following targets:</p><ul><li><code>build</code> (default) simple go build</li><li><code>version</code> show current VERSION of Github repository</li><li><code>image</code> build a local docker image</li><li><code>multi</code> build multiarch images with docker</li><li><code>ca</code> executes build and creates a component archive</li><li><code>ctf</code> create a common transport format archive</li><li><code>push</code> pushes the common transport format to an OCI registry</li><li><code>info</code> shows variables used in makefile (version, commit, etc.)</li><li><code>describe</code> displays the component version in a tree-form</li><li><code>descriptor</code> shows the component-descriptor for this component version</li><li><code>transport</code> transport the component from the upload repository into another OCM repository</li><li><code>clean</code> deletes all generated files (but does not delete docker images)</li></ul><p>The variables at the beginning assigned with <code>?=</code> can be set from outside and override the default
declared in the makefile. Use either an environment variable or an argument when calling <code>make</code>.</p><p>Example:</p><pre><code>$ PROVIDER=foo make ca
</code></pre><h3 id=templating-the-resources>Templating the resources <a href=#templating-the-resources class=anchor aria-hidden=true>#</a></h3><p>The makefile uses a dynamic list of generated platforms for the images. You can just set the
<code>PLATFORMS</code> variable:</p><pre><code class=language-makefile>MULTI     ?= true
PLATFORMS ?= linux/amd64 linux/arm64
</code></pre><p>If <code>MULTI</code> is set to <code>true</code> the variable <code>PLATFORMS</code> will be evaluated to decide which image variants
will be built. This has to be reflected in the <code>resources.yaml</code>. It has to use the input type
<code>dockermulti</code> and list all the variants which should be aggregated into a multiarch image. This list
depends on the content of the make variable.</p><p>The ocm CLI supports this by enabling templating mechanisms for the content by selecting a templater
using the option <code>--templater ...</code> . The example uses the <a href=https://github.com/mandelsoft/spiff>Spiff templater</a>.</p><pre><code class=language-makefile>$(GEN)/ca: $(GEN)/.exists $(GEN)/image.$(NAME)$(FLAGSUF) resources.yaml $(CHART_SRCS)
	$(OCM) create ca -f $(COMPONENT) &quot;$(VERSION)&quot; --provider $(PROVIDER) --file $(GEN)/ca
	$(OCM) add resources --templater spiff $(GEN)/ca COMMIT=&quot;$(COMMIT)&quot; VERSION=&quot;$(VERSION)&quot; \
		IMAGE=&quot;$(IMAGE):$(VERSION)&quot; PLATFORMS=&quot;$(PLATFORMS)&quot; MULTI=$(MULTI) resources.yaml
	@touch $(GEN)/ca
</code></pre><p>The variables given to the <code>add resources</code> command are passed to the templater. The template looks
like:</p><pre><code class=language-yaml>name: image
type: ociImage
version: (( values.VERSION ))
input:
  type: (( bool(values.MULTI) ? &quot;dockermulti&quot; :&quot;docker&quot; ))
  repository:  (( index(values.IMAGE, &quot;:&quot;) &gt;= 0 ? substr(values.IMAGE,0,index(values.IMAGE,&quot;:&quot;)) :values.IMAGE ))
  variants: (( bool(values.MULTI) ? map[split(&quot; &quot;, values.PLATFORMS)|v|-&gt; values.IMAGE &quot;-&quot; replace(v,&quot;/&quot;,&quot;-&quot;)] :~~ ))
  path: (( bool(values.MULTI) ? ~~ :values.IMAGE ))
</code></pre><p>It distinguishes with the variable <code>values.MULTI</code> between a single docker image and multiarch image.
With <code>map[]</code> the platform list from the makefile is mapped to a list of tags created by the
<code>docker buildx</code> command used in the makefile. The value <code>~~</code> is used to undefine the yaml fields not
required for the selected case (the template can be used for multi and single arch builds).</p><pre><code class=language-makefile>$(GEN)/image.$(NAME).multi: $(GEN)/.exists Dockerfile $(GO_SRCS)
	echo &quot;Building Multi $(PLATFORMS)&quot;
	for i in $(PLATFORMS); do \
	tag=$$(echo $$i | sed -e s:/:-:g); \
	echo &quot;Building platform $$i with tag: $$tag&quot;; \
	docker buildx build --load -t $(IMAGE):$(VERSION)-$$tag --platform $$i .; \
	done
	@touch $(GEN)/image.$(NAME).multi
</code></pre><h2 id=pipeline-integration>Pipeline integration <a href=#pipeline-integration class=anchor aria-hidden=true>#</a></h2><p>Pipeline infrastructures are heterogenous so that there is no universal answer how to integrate.
Usually the simplest way to integrate is using the command line interface of the <code>ocm</code> project. As
one example we use GitHub actions how an integration can be done:</p><p>There are two repositories dealing with GitHub actions:
The <a href=https://github.com/open-component-model/ocm-action>first one</a> provides various actions that can
called from a workflow. The <a href=https://github.com/open-component-model/ocm-setup-action>second one</a>
provides the necessary installations of ocm into the container.</p><p>An typical workflow for a build step will create a component version. It contains the following steps:</p><pre><code class=language-yaml>jobs:
  create-ocm:
    runs-on: ubuntu-latest
    steps:
      ...
      - name: setup OCM
        uses: open-component-model/ocm-setup-action@main
      ...
      - name: create OCM component version
        uses: open-component-model/ocm-action@main
        with:
          action: create_component
          component: acme.org/demo/simpleserver
          provider: ${{ env.PROVIDER }}
          version: github.com/jensh007
      ...
</code></pre><p>This creates a component version for the current build. Additionally a transport archive
may be created or the component version along with the built container images may be uploaded to an
OCI registry, etc.</p><p>The documentation is available <a href=https://github.com/open-component-model/ocm-action>here</a>. A full
example can be found in the sample Github repository.</p><h2 id=static-and-dynamic-variable-substitution>Static and Dynamic Variable Substitution <a href=#static-and-dynamic-variable-substitution class=anchor aria-hidden=true>#</a></h2><p>Looking at the <a href=../structuring-software-with-ocm#building-the-common-transport-archive>settings file</a> shows that
some variables like the <code>version</code> or the <code>commit</code> will change frequently with every build
or release. Often these will be auto-generated during build.</p><p>Other variables like the version of used 3rd-party components will change from time to
time and will be set manually by a developer or release manager. It is useful to separate
between static and dynamic variables. Static files can be checked-in into source control and
are maintained manually. Dynamic variables can be generated during build.</p><p>Example:
manually maintained:</p><pre><code class=language-yaml>NAME: microblog
COMPONENT_NAME_PREFIX: github.com/acme.org/microblog
PROVIDER: ocm.software
ELASTIC_VERSION: 8.5.1
MARIADB_VERSION: 10.6.11
MARIADB_CHART_VERSION: 11.4.2
NGINX_VERSION: 1.5.1
NGINX_CHART_VERSION: 4.4.2
</code></pre><p>auto generated from a build script:</p><pre><code class=language-yaml>VERSION: 0.23.1
COMMIT: 5f03021059c7dbe760ac820a014a8a84166ef8b4
</code></pre><pre><code class=language-shell>ocm add componentversions --create --file ../gen/ctf --settings ../gen/dynamic_settings.yaml --settings static_settings.yaml component-constructor.yaml
</code></pre><h2 id=debugging-explain-the-blobs-directory>Debugging: Explain the blobs directory <a href=#debugging-explain-the-blobs-directory class=anchor aria-hidden=true>#</a></h2><p>For analysing and debugging the transport archive some commands can help to find what is contained in the archive and what is stored in which blob:</p><pre><code>tree ../gen/ctf
../gen/ctf
├── artifact-index.json
└── blobs
    ├── ...
    ├── sha256.59ff88331c53a2a94cdd98df58bc6952f056e4b2efc8120095fbc0a870eb0b67
    ├── ...
</code></pre><pre><code class=language-shell>ocm get resources -r -o wide ../gen/ctf
...
---
REFERENCEPATH: github.com/acme.org/microblog/nginx-controller:1.5.1
NAME         : nginx-controller-chart
VERSION      : 1.5.1
IDENTITY     :
TYPE         : helmChart
RELATION     : local
ACCESSTYPE   : localBlob
ACCESSSPEC   : {&quot;localReference&quot;:&quot;sha256:59ff88331c53a2a94cdd98df58bc6952f056e4b2efc8120095fbc0a870eb0b67&quot;,&quot;mediaType&quot;:&quot;application/vnd.oci.image.manifest.v1+tar+gzip&quot;,&quot;referenceName&quot;:&quot;github.com/acme.org/microblog/nginx-controller/ingress-nginx:4.4.2&quot;}
...
</code></pre><h2 id=self-contained-transport-archives>Self-contained transport archives <a href=#self-contained-transport-archives class=anchor aria-hidden=true>#</a></h2><p>The transport archive created from as components file by using the command <code>ocm add componentversions --create ...</code> does not automatically resolve image references to external registries. If you want create a transport archive with all images contained as local artifact you need to convert it in a second step:</p><pre><code>ocm transfer ctf --copy-resources &lt;ctf-dir&gt; &lt;new-ctf-dir-or-oci-repo-url&gt;
</code></pre><p>Note that this archive can become huge if there an many external images involved!</p><h2 id=cicd-integration>CICD integration <a href=#cicd-integration class=anchor aria-hidden=true>#</a></h2><p>Configure rarely changing variables in a static file and generate dynamic variables
during build from environment. See <a href=#static-and-dynamic-variable-substitution>explanation above</a>.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=/docs/guides/input_and_access/><div class="card my-1"><div class="card-body py-2">&larr; Input and Access Types</div></div></a><a class=ms-auto href=/docs/guides/complex-component-structure-deployment/><div class="card my-1"><div class="card-body py-2">Deployment scenario using an aggregate(d) component &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class="row justify-content-center"><div class=col-lg-12><p class=text-center><small>© Copyright 2024, <a href=https://www.sap.com/corporate/en/legal/copyright.html>SAP SE</a> and Open Component Model Contributors | <a href=https://www.sap.com/about/legal/trademark.html>Trademark</a> | <a href=/privacy-policy/>Privacy Policy</a> | <a href=https://www.sap.com/corporate/en/legal/terms-of-use.html>Terms of Use</a> | <a href=https://www.sap.com/corporate/en/legal/impressum.html>Legal Disclosure</a></small></p></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.54bf0932b8a36d0e152b1635b099a6ef1394d35327e2437550a075c9c8ed1bd8aed5847c21b36fc02ed24014c031d9ca24017b0c78b1639d7e2fa8329898b842.js integrity="sha512-VL8JMrijbQ4VKxY1sJmm7xOU01Mn4kN1UKB1ycjtG9iu1YR8IbNvwC7SQBTAMdnKJAF7DHixY51+L6gymJi4Qg==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.56a414730f1135fe77b5ea30bf74a2cc4101a6f386e85e5b789c800570cc33d33054000f45932c053a59b41018f72687867254a80e1b9710671852492533162f.js integrity="sha512-VqQUcw8RNf53teowv3SizEEBpvOG6F5beJyABXDMM9MwVAAPRZMsBTpZtBAY9yaHhnJUqA4blxBnGFJJJTMWLw==" crossorigin=anonymous defer></script>
<script src=/main.min.867372088b3d9d28e68d38f8a8365d28934d875dc849d445fe06cc02a75d29286fa27e6ab5f9820c0d5bdcf90711a1ee7a4d89a7e0bee27ebb521ecd1c1f0175.js integrity="sha512-hnNyCIs9nSjmjTj4qDZdKJNNh13ISdRF/gbMAqddKShvon5qtfmCDA1b3PkHEaHuek2Jp+C+4n67Uh7NHB8BdQ==" crossorigin=anonymous defer></script>
<script type=text/javascript async src=https://play.vidyard.com/embed/v4.js></script></body></html>