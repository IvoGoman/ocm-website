<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap" rel=stylesheet><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://ocm.software/main.b8e4ee04872e04a9cffbaea2279bd3936a61c95d05086ab6a93e3c21217c7c468da4dca7602ddbed6c5a8ae537904366ac2ed1d5eff130b630c4fb4fb8fd94a7.css integrity="sha512-uOTuBIcuBKnP+66iJ5vTk2phyV0FCGq2qT48ISF8fEaNpNynYC3b7WxaiuU3kENmrC7R1e/xMLYwxPtPuP2Upw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><style>@import 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap'</style><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Build & Deploy Infrastructure via Helm Charts with OCM | Open Component Model</title><meta name=description content="Introduction # Let&amp;rsquo;s illustrate a very simple &amp;ldquo;Hello World&amp;rdquo; example application and show how to leverage OCM to build an application component containing a Helm Chart and an OCI Image and deploy it to a local kind k8s cluster. The topics ocm localization and configuration are NOT part of this very simple example and is part of other deep-dive guides.
As base we use the podinfo application from Stefan Prodan&amp;rsquo;s Github repo."><link rel=canonical href=https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Build & Deploy Infrastructure via Helm Charts with OCM"><meta property="og:description" content="Introduction # Let&rsquo;s illustrate a very simple &ldquo;Hello World&rdquo; example application and show how to leverage OCM to build an application component containing a Helm Chart and an OCI Image and deploy it to a local kind k8s cluster. The topics ocm localization and configuration are NOT part of this very simple example and is part of other deep-dive guides.
As base we use the podinfo application from Stefan Prodan&rsquo;s Github repo."><meta property="og:url" content="https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/"><meta property="og:site_name" content="Open Component Model"><meta property="article:published_time" content="2024-03-19T10:36:48+01:00"><meta property="article:modified_time" content="2024-03-19T10:36:48+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Build & Deploy Infrastructure via Helm Charts with OCM"><meta name=twitter:description content><meta name=twitter:card content="summary"><meta name=twitter:image:alt content="Build & Deploy Infrastructure via Helm Charts with OCM"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://ocm.software/#/schema/organization/1","name":"OCM","url":"https://ocm.software/","sameAs":["https://github.com/open-component-model"],"logo":{"@type":"ImageObject","@id":"https://ocm.software/#/schema/image/1","url":"https://ocm.software/","width":512,"height":512,"caption":"OCM"},"image":{"@id":"https://ocm.software/#/schema/image/1"}},{"@type":"WebSite","@id":"https://ocm.software/#/schema/website/1","url":"https://ocm.software/","name":"Open Component Model","description":"","publisher":{"@id":"https://ocm.software/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/","url":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/","name":"Build \u0026 Deploy Infrastructure via Helm Charts with OCM","description":"","isPartOf":{"@id":"https://ocm.software/#/schema/website/1"},"about":{"@id":"https://ocm.software/#/schema/organization/1"},"datePublished":"2024-03-19T10:36:48CET","dateModified":"2024-03-19T10:36:48CET","breadcrumb":{"@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/"]}]},{"@type":"BreadcrumbList","@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://ocm.software","url":"https://ocm.software","name":"Home"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://ocm.software/docs/","url":"https://ocm.software/docs/","name":"Docs"}},{"@type":"ListItem","position":4,"item":{"@type":"WebPage","@id":"https://ocm.software/docs/guides/","url":"https://ocm.software/docs/guides/","name":"Guides"}},{"@type":"ListItem","position":5,"item":{"@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Article","@id":"https://ocm.software/#/schema/article/1","headline":"Build \u0026 Deploy Infrastructure via Helm Charts with OCM","description":"","isPartOf":{"@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/"},"mainEntityOfPage":{"@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/"},"datePublished":"2024-03-19T10:36:48CET","dateModified":"2024-03-19T10:36:48CET","author":{"@id":"https://ocm.software/#/schema/person/2"},"publisher":{"@id":"https://ocm.software/#/schema/organization/1"},"image":{"@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/#/schema/image/2"}}]},{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://ocm.software/#/schema/person/2","name":"","sameAs":[]}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/#/schema/image/2","url":null,"contentUrl":null,"caption":"Build \u0026 Deploy Infrastructure via Helm Charts with OCM"}]}]}</script><meta name=theme-color content="#fff"><link rel=icon href=https://ocm.software/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://ocm.software/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://ocm.software/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ocm.software/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ocm.software/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://ocm.software/site.webmanifest><script type=text/javascript async src=https://play.vidyard.com/embed/v4.js></script></head><body class="docs single"><div class=sticky-top><header class="navbar navbar-expand-lg navbar-light doks-navbar"><nav class="container-fluid flex-wrap flex-lg-nowrap" aria-label="Main navigation"><a class="navbar-brand order-0" href=/ aria-label="Open Component Model"><img src=/images/logo-horizontal-white-text.png alt="Open Component Model Logo" class=header-logo></a>
<button class="btn btn-link order-0 ms-auto d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasExample aria-controls=offcanvasExample><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"/><circle cx="19" cy="12" r="1"/><circle cx="5" cy="12" r="1"/></svg></button><div class="offcanvas offcanvas-start d-lg-none" tabindex=-1 id=offcanvasExample aria-labelledby=offcanvasExampleLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasExampleLabel>Browse docs</h5><button type=button class=btn-close data-bs-dismiss=offcanvas aria-label=Close></button></div><div class=offcanvas-body><aside class="doks-sidebar mt-n3"><nav id=doks-docs-nav aria-label="Tertiary navigation"><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3><hr class="mt-1 mb-1"><ul class="list-unstyled ms-2 mt-2 mb-0"></ul><a class=docs-link href=https://ocm.software/docs/overview/><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/context/>Context</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/scope/>Scope</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/installation/>Installation</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul><a class=docs-link href=https://ocm.software/docs/demos/><h3 class="h6 text-capitalize mt-1 mb-1">Demos</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/demos/secure-software-delivery/>Secure software delivery</a></li></ul><a class="docs-link active" href=https://ocm.software/docs/guides/><h3 class="h6 text-capitalize mt-1 mb-1">Guides</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li class=ms-2><a class="docs-link active" href=https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/>Build & Deploy Infrastructure via Helm Charts with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul><a class=docs-link href=https://ocm.software/docs/component-descriptors/><h3 class="h6 text-capitalize mt-1 mb-1">Component Descriptors</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-2/>Version 2</a></li></ul><a class=docs-link href=https://ocm.software/docs/cli/><h3 class="h6 text-capitalize mt-1 mb-1">Command Line Client</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li><a class=docs-link href=https://ocm.software/docs/cli/add/><h4 class="h6 text-muted ms-1 mt-2 mb-1">add</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/clean/><h4 class="h6 text-muted ms-1 mt-2 mb-1">clean</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/create/><h4 class="h6 text-muted ms-1 mt-2 mb-1">create</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/describe/><h4 class="h6 text-muted ms-1 mt-2 mb-1">describe</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/cache/>cache</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/package/>package</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/download/><h4 class="h6 text-muted ms-1 mt-2 mb-1">download</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/cli/>cli</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/get/><h4 class="h6 text-muted ms-1 mt-2 mb-1">get</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/add_componentversions/ocm-labels/>ocm-labels</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/><h4 class="h6 text-muted ms-1 mt-2 mb-1">show</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/sign/><h4 class="h6 text-muted ms-1 mt-2 mb-1">sign</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/sign/hash/>hash</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/describe_package/toi-bootstrapping/>toi-bootstrapping</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/><h4 class="h6 text-muted ms-1 mt-2 mb-1">transfer</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/verify/><h4 class="h6 text-muted ms-1 mt-2 mb-1">verify</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></ul><a class=docs-link href=https://ocm.software/docs/controller-reference/><h3 class="h6 text-capitalize mt-1 mb-1">Kubernetes Controllers</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/overview/>Overview</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">OCM Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">Replication Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/><h4 class="h6 text-muted ms-1 mt-2 mb-1">API Reference</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/resource-pipeline-controller/></a></li></ul></ul></nav></aside></div></div><button class="btn btn-menu order-2 d-block d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-end border-0" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="offcanvas-header d-lg-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a href=/>Open Component Model</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body p-4 p-lg-0 align-self-end"><ul class="nav flex-column flex-lg-row align-items-lg-center mt-2 mt-lg-0 ms-lg-2"><li class=nav-item><a class="nav-link ps-0 py-1 active" href=/docs/overview/context>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/spec/>Spec</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/project/about>Project</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/community>Community</a></li></ul><ul class="nav flex-column flex-lg-row"><li class=nav-item><a class="nav-link social-link" href=https://kubernetes.slack.com/archives/C05UWBE8R1D><svg role="img" width="36" height="36" viewBox="0 0 24 24" fill="#fff" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 15.165a2.528 2.528.0 01-2.52 2.523A2.528 2.528.0 010 15.165a2.527 2.527.0 012.522-2.52h2.52v2.52zm1.271.0a2.527 2.527.0 012.521-2.52 2.527 2.527.0 012.521 2.52v6.313A2.528 2.528.0 018.834 24a2.528 2.528.0 01-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528.0 01-2.521-2.52A2.528 2.528.0 018.834.0a2.528 2.528.0 012.521 2.522v2.52H8.834zm0 1.271a2.528 2.528.0 012.521 2.521 2.528 2.528.0 01-2.521 2.521H2.522A2.528 2.528.0 010 8.834a2.528 2.528.0 012.522-2.521h6.312zM18.956 8.834a2.528 2.528.0 012.522-2.521A2.528 2.528.0 0124 8.834a2.528 2.528.0 01-2.522 2.521h-2.522V8.834zm-1.268.0a2.528 2.528.0 01-2.523 2.521 2.527 2.527.0 01-2.52-2.521V2.522A2.527 2.527.0 0115.165.0a2.528 2.528.0 012.523 2.522v6.312zM15.165 18.956a2.528 2.528.0 012.523 2.522A2.528 2.528.0 0115.165 24a2.527 2.527.0 01-2.52-2.522v-2.522h2.52zm0-1.268a2.527 2.527.0 01-2.52-2.523 2.526 2.526.0 012.52-2.52h6.313A2.527 2.527.0 0124 15.165a2.528 2.528.0 01-2.522 2.523h-6.313z"/></svg><small class="ms-2 d-lg-none">Slack</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/open-component-model><svg width="36" height="36" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58.0.0 3.58.0 8c0 3.54 2.29 6.53 5.47 7.59C5.87 15.66 6.02 15.42 6.02 15.21 6.02 15.02 6.01 14.39 6.01 13.72 4 14.09 3.48 13.23 3.32 12.78 3.23 12.55 2.84 11.84 2.5 11.65 2.22 11.5 1.82 11.13 2.49 11.12 3.12 11.11 3.57 11.7 3.72 11.94 4.44 13.15 5.59 12.81 6.05 12.6 6.12 12.08 6.33 11.73 6.56 11.53 4.78 11.33 2.92 10.64 2.92 7.58c0-.87.31-1.59.82-2.15C3.66 5.23 3.38 4.41 3.82 3.31c0 0 .67-.21 2.2.82C6.66 3.95 7.34 3.86 8.02 3.86S9.38 3.95 10.02 4.13c1.53-1.04 2.2-.82 2.2-.82C12.66 4.41 12.38 5.23 12.3 5.43 12.81 5.99 13.12 6.7 13.12 7.58c0 3.07-1.87 3.75-3.65 3.95C9.76 11.78 10.01 12.26 10.01 13.01 10.01 14.08 10 14.94 10 15.21 10 15.42 10.15 15.67 10.55 15.59 13.71 14.53 16 11.53 16 8c0-4.42-3.58-8-8-8z" fill="#f3f3f3"/></svg><small class="ms-2 d-lg-none">GitHub</small></a></li></ul></div></div></nav></header></div><div class=container-fluid><aside class=doks-sidebar><nav id=doks-docs-nav class="collapse d-lg-none" aria-label="Tertiary navigation"><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3><hr class="mt-1 mb-1"><ul class="list-unstyled ms-2 mt-2 mb-0"></ul><a class=docs-link href=https://ocm.software/docs/overview/><h3 class="h6 text-capitalize mt-1 mb-1">Overview</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/context/>Context</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/scope/>Scope</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/installation/>Installation</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul><a class=docs-link href=https://ocm.software/docs/demos/><h3 class="h6 text-capitalize mt-1 mb-1">Demos</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/demos/secure-software-delivery/>Secure software delivery</a></li></ul><a class="docs-link active" href=https://ocm.software/docs/guides/><h3 class="h6 text-capitalize mt-1 mb-1">Guides</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li class=ms-2><a class="docs-link active" href=https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/>Build & Deploy Infrastructure via Helm Charts with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul><a class=docs-link href=https://ocm.software/docs/component-descriptors/><h3 class="h6 text-capitalize mt-1 mb-1">Component Descriptors</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/component-descriptors/version-2/>Version 2</a></li></ul><a class=docs-link href=https://ocm.software/docs/cli/><h3 class="h6 text-capitalize mt-1 mb-1">Command Line Client</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li><a class=docs-link href=https://ocm.software/docs/cli/add/><h4 class="h6 text-muted ms-1 mt-2 mb-1">add</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/clean/><h4 class="h6 text-muted ms-1 mt-2 mb-1">clean</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/create/><h4 class="h6 text-muted ms-1 mt-2 mb-1">create</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/describe/><h4 class="h6 text-muted ms-1 mt-2 mb-1">describe</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/cache/>cache</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/package/>package</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/download/><h4 class="h6 text-muted ms-1 mt-2 mb-1">download</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/cli/>cli</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/get/><h4 class="h6 text-muted ms-1 mt-2 mb-1">get</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/routingslips/>routingslips</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/add_componentversions/ocm-labels/>ocm-labels</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/><h4 class="h6 text-muted ms-1 mt-2 mb-1">show</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/sign/><h4 class="h6 text-muted ms-1 mt-2 mb-1">sign</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/sign/hash/>hash</a></li></ul><li class=ms-2><a class=docs-link href=https://ocm.software/docs/cli/describe_package/toi-bootstrapping/>toi-bootstrapping</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/><h4 class="h6 text-muted ms-1 mt-2 mb-1">transfer</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class=docs-link href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/cli/verify/><h4 class="h6 text-muted ms-1 mt-2 mb-1">verify</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></ul><a class=docs-link href=https://ocm.software/docs/controller-reference/><h3 class="h6 text-capitalize mt-1 mb-1">Kubernetes Controllers</h3></a><hr class="mt-1 mb-1"><ul class="list-unstyled mb-0"><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/overview/>Overview</a></li><li class=ms-2><a class=docs-link href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">OCM Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/><h4 class="h6 text-muted ms-1 mt-2 mb-1">Replication Controller</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/><h4 class="h6 text-muted ms-1 mt-2 mb-1">API Reference</h4></a></li><ul class="list-unstyled ms-3"><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li><li><a class=docs-link href=https://ocm.software/docs/controller-reference/api-reference/resource-pipeline-controller/></a></li></ul></ul></nav></aside></div><div class="wrap container-fluid" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav id=docs-sidebar class=docs-links aria-label="Main navigation"><ul class="list-unstyled collapsible-sidebar mt-0 mb-0"><ul class="list-unstyled ms-0 mt-5 mb-0"></ul><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-3b878279a04dc47d60932cb294d96259 aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Overview</h3></button><div class=collapse id=section-3b878279a04dc47d60932cb294d96259><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/context/>Context</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/scope/>Scope</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/installation/>Installation</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/overview/contributing/>Contributing</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8ade2d34ff8c8d9571bb9f13d4af8c6a aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Demos</h3></button><div class=collapse id=section-8ade2d34ff8c8d9571bb9f13d4af8c6a><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/demos/secure-software-delivery/>Secure software delivery</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-45389ee90014e0938cb09409b9a8794d aria-expanded=true><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Guides</h3></button><div class="collapse show" id=section-45389ee90014e0938cb09409b9a8794d><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/getting-started-with-ocm/>Getting Started with OCM</a></li><li><a class="docs-link rounded active" href=https://ocm.software/docs/guides/build-deploy-software-via-helm-charts-with-ocm-101/>Build & Deploy Infrastructure via Helm Charts with OCM</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/structuring-software-with-ocm/>Structuring Software with OCM</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/deploying-applications-with-ocm-and-gitops/>Deploying Applications with OCM & GitOps</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/air-gapped-gitops-with-ocm-and-flux/>Air-gapped GitOps with OCM & Flux</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/gitops-driven-configuration-of-ocm-applications/>GitOps Driven Configuration of OCM Applications</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/input_and_access/>Input and Access Types</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/best-practices-with-ocm/>Best Practices</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/guides/complex-component-structure-deployment/>Deployment scenario using an aggregate(d) component</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-586e8b59e93b90a392c4668ce7563d70 aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Component Descriptors</h3></button><div class=collapse id=section-586e8b59e93b90a392c4668ce7563d70><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/component-descriptors/version-3/>Version 3</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/component-descriptors/version-2/>Version 2</a></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-4020ef13fa7b3dc5342ce3986c5a718f aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">cli-reference</h3></button><div class=collapse id=section-4020ef13fa7b3dc5342ce3986c5a718f><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-34ec78fcc91ffb1e54cd85e4a0924332 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">add</h5></button><div class=collapse id=section-34ec78fcc91ffb1e54cd85e4a0924332><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/references/>references</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/resource-configuration/>resource-configuration</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/resources/>resources</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/routingslips/>routingslips</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/source-configuration/>source-configuration</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add/sources/>sources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-123402c04dcfb6625f688f771a5fc05d aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">clean</h5></button><div class=collapse id=section-123402c04dcfb6625f688f771a5fc05d><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/clean/cache/>cache</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-76ea0bebb3c22822b4f0dd9c9fd021c5 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">create</h5></button><div class=collapse id=section-76ea0bebb3c22822b4f0dd9c9fd021c5><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/componentarchive/>componentarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/rsakeypair/>rsakeypair</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/create/transportarchive/>transportarchive</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-0d16430e9f0aa8879ba9dac2540543fc aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">describe</h5></button><div class=collapse id=section-0d16430e9f0aa8879ba9dac2540543fc><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/cache/>cache</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/package/>package</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe/plugins/>plugins</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-fd456406745d816a45cae554c788e754 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">download</h5></button><div class=collapse id=section-fd456406745d816a45cae554c788e754><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/cli/>cli</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/download/resources/>resources</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-b5eda0a74558a342cf659187f06f746f aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">get</h5></button><div class=collapse id=section-b5eda0a74558a342cf659187f06f746f><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/credentials/>credentials</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/plugins/>plugins</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/references/>references</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/resources/>resources</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/routingslips/>routingslips</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/get/sources/>sources</a></li></ul></div></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/add_componentversions/ocm-labels/>ocm-labels</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-a7dd12b1dab17d25467b0b0a4c8d4a92 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">show</h5></button><div class=collapse id=section-a7dd12b1dab17d25467b0b0a4c8d4a92><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/show/tags/>tags</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/show/versions/>versions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-04b29480233f4def5c875875b6bdc3b1 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">sign</h5></button><div class=collapse id=section-04b29480233f4def5c875875b6bdc3b1><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/sign/componentversions/>componentversions</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/sign/hash/>hash</a></li></ul></div></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/describe_package/toi-bootstrapping/>toi-bootstrapping</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-84a0f3455dcca894ace136be62efa292 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">transfer</h5></button><div class=collapse id=section-84a0f3455dcca894ace136be62efa292><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/artifacts/>artifacts</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/commontransportarchive/>commontransportarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/componentarchive/>componentarchive</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/transfer/componentversions/>componentversions</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-e8418d1d706cd73548f9f16f1d55ad6e aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">verify</h5></button><div class=collapse id=section-e8418d1d706cd73548f9f16f1d55ad6e><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/cli/verify/componentversions/>componentversions</a></li></ul></div></li></ul></div></li><li class="mb-0 mt-0"><button class="btn btn-toggle align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-8953fee62c09283faf60084f6db3826e aria-expanded=false><h3 class="h6 text-capitalize pt-2 mt-0 mb-0">Kubernetes Controllers</h3></button><div class=collapse id=section-8953fee62c09283faf60084f6db3826e><hr class="mt-1 mb-1"><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/overview/>Overview</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/installation/>Installation</a></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-77c54d2a9106c22e3bc203d8b35bd627 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">OCM Controller</h5></button><div class=collapse id=section-77c54d2a9106c22e3bc203d8b35bd627><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/ocm-controller/component-version/>Component Version</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-be2844c305a730ff0fbae91208e810c3 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">Replication Controller</h5></button><div class=collapse id=section-be2844c305a730ff0fbae91208e810c3><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/replication-controller/component-subscription/>Component Subscription</a></li></ul></div></li><li class=ms-0><button class="btn btn-toggle nav-link align-items-center rounded collapsed" data-bs-toggle=collapse data-bs-target=#section-05b017e42952fddf972dcdfddede5740 aria-expanded=false>
<i class="bi bi-caret-right-fill text-white"></i><h6 class="h6 text-capitalize text-muted mt-1 mb-1">API Reference</h5></button><div class=collapse id=section-05b017e42952fddf972dcdfddede5740><ul class="btn-toggle-nav list-unstyled mb-0"><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/ocm-controller/>OCM Controller API v1</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/replication-controller/>Replication Controller API v1</a></li><li><a class="docs-link rounded" href=https://ocm.software/docs/controller-reference/api-reference/resource-pipeline-controller/></a></li></ul></div></li></ul></div></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#requirements>Requirements</a></li></ul></li><li><a href=#building-the-application-component-using-ocm>Building the Application Component using OCM</a><ul><li><a href=#prepare-helm-charts>Prepare Helm Charts</a></li><li><a href=#input-specification>Input Specification</a></li><li><a href=#building-the-common-transport-archive-ctf>Building the Common Transport Archive (CTF)</a></li><li><a href=#package>Package</a></li></ul></li><li><a href=#deploying-the-ocm-software-artifact>Deploying the OCM Software Artifact</a><ul><li><a href=#setup-local-kind-cluster>Setup Local Kind Cluster</a></li><li><a href=#inspect-component-descriptor>Inspect component descriptor</a></li><li><a href=#apply-k8s-manifest>Apply k8s manifest</a></li></ul></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#requirements>Requirements</a></li></ul></li><li><a href=#building-the-application-component-using-ocm>Building the Application Component using OCM</a><ul><li><a href=#prepare-helm-charts>Prepare Helm Charts</a></li><li><a href=#input-specification>Input Specification</a></li><li><a href=#building-the-common-transport-archive-ctf>Building the Common Transport Archive (CTF)</a></li><li><a href=#package>Package</a></li></ul></li><li><a href=#deploying-the-ocm-software-artifact>Deploying the OCM Software Artifact</a><ul><li><a href=#setup-local-kind-cluster>Setup Local Kind Cluster</a></li><li><a href=#inspect-component-descriptor>Inspect component descriptor</a></li><li><a href=#apply-k8s-manifest>Apply k8s manifest</a></li></ul></li></ul></nav></div></nav><main class="docs-content container-xxl col-lg-11 col-xl-9"><h1>Build & Deploy Infrastructure via Helm Charts with OCM</span></h1><p class=lead></p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=d-xl-none><button class="btn btn-outline-primary btn-sm doks-toc-toggle collapsed" type=button data-bs-toggle=collapse data-bs-target=#onThisPage aria-controls=doks-docs-nav aria-expanded=false aria-label="Toggle On this page navigation">
<span>On this page</span>
<span><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-expand" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Expand</title><polyline points="7 13 12 18 17 13"/><polyline points="7 6 12 11 17 6"/></svg><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" class="doks doks-collapse" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><title>Collapse</title><polyline points="17 11 12 6 7 11"/><polyline points="17 18 12 13 7 18"/></svg></span></button><div class=collapse id=onThisPage><div class="card card-body mt-3 py-1"><div class=page-links><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#requirements>Requirements</a></li></ul></li><li><a href=#building-the-application-component-using-ocm>Building the Application Component using OCM</a><ul><li><a href=#prepare-helm-charts>Prepare Helm Charts</a></li><li><a href=#input-specification>Input Specification</a></li><li><a href=#building-the-common-transport-archive-ctf>Building the Common Transport Archive (CTF)</a></li><li><a href=#package>Package</a></li></ul></li><li><a href=#deploying-the-ocm-software-artifact>Deploying the OCM Software Artifact</a><ul><li><a href=#setup-local-kind-cluster>Setup Local Kind Cluster</a></li><li><a href=#inspect-component-descriptor>Inspect component descriptor</a></li><li><a href=#apply-k8s-manifest>Apply k8s manifest</a></li></ul></li></ul></nav></div></div></div></div><div class="page-links d-none d-xl-block"><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a><ul><li><a href=#requirements>Requirements</a></li></ul></li><li><a href=#building-the-application-component-using-ocm>Building the Application Component using OCM</a><ul><li><a href=#prepare-helm-charts>Prepare Helm Charts</a></li><li><a href=#input-specification>Input Specification</a></li><li><a href=#building-the-common-transport-archive-ctf>Building the Common Transport Archive (CTF)</a></li><li><a href=#package>Package</a></li></ul></li><li><a href=#deploying-the-ocm-software-artifact>Deploying the OCM Software Artifact</a><ul><li><a href=#setup-local-kind-cluster>Setup Local Kind Cluster</a></li><li><a href=#inspect-component-descriptor>Inspect component descriptor</a></li><li><a href=#apply-k8s-manifest>Apply k8s manifest</a></li></ul></li></ul></nav></div></nav><h2 id=introduction>Introduction <a href=#introduction class=anchor aria-hidden=true>#</a></h2><p>Let&rsquo;s illustrate a very simple &ldquo;Hello World&rdquo; example application and show how to leverage OCM to build an application component containing a Helm Chart and an OCI Image and deploy it to a local <code>kind</code> k8s cluster.
The topics <code>ocm</code> <a href=https://ocm.software/docs/guides/complex-component-structure-deployment/#localization><code>localization</code></a> and <a href=https://ocm.software/docs/guides/complex-component-structure-deployment/#configuration><code>configuration</code></a> are NOT part of this very simple example and is part of other deep-dive guides.</p><p>As base we use the <code>podinfo</code> application from Stefan Prodan&rsquo;s <a href=https://github.com/stefanprodan/podinfo>Github repo</a>.
All files can be found <a href=https://github.com/open-component-model/ocm-examples>here</a>.</p><p>At the end of the tutorial you will have created one OCM component for your business application <code>podinfo</code>.
This component will be composed using the OCM guidelines and consist of several resources, here an OCI image and a Helm chart.</p><p>For building multiple components in one shot the <a href=../getting-started-with-ocm#all-in-one>&ldquo;all-in-one&rdquo;</a>
mechanism becomes handy.</p><h3 id=requirements>Requirements <a href=#requirements class=anchor aria-hidden=true>#</a></h3><ul><li><a href=https://github.com/open-component-model/ocm>OCM command line tool</a></li><li><a href=https://kubernetes.io/docs/reference/kubectl/>kubectl</a></li><li><a href=https://git-scm.com/downloads>git</a></li><li><a href=https://kind.sigs.k8s.io/docs/user/quick-start/#installation>kind</a></li><li><a href=https://fluxcd.io/flux/installation/#install-the-flux-cli>flux</a></li></ul><h2 id=building-the-application-component-using-ocm>Building the Application Component using OCM <a href=#building-the-application-component-using-ocm class=anchor aria-hidden=true>#</a></h2><p>First we build an OCM component which contains Helm Charts in different kind of formats. This 101 guide explains all possible formats,
but in reality you&rsquo;ll just pick the one most appropiate to you.</p><h3 id=prepare-helm-charts>Prepare Helm Charts <a href=#prepare-helm-charts class=anchor aria-hidden=true>#</a></h3><p>We are leveraging Kubernetes deployments which often use Helm charts. The OCM specification supports Helm charts as
an artifact type. For this simple example, we will re-use already existing open source community Helm charts.</p><p>The OCM CLI supports referencing Helm charts being stored in an OCI registry. However most
publicly available helm charts currently are available from helm chart repositories and
not from OCI registries. Therefore Helm charts can be embedded in the <code>component archive</code> in three different ways.</p><p>Reference a Helm Chart from:</p><ol><li>a public Helm Chart repository</li><li>local <code>*.tgz</code> file</li><li>local folder containing a Helm Chart file</li></ol><p>To demonstrate No. 2. and 3. we need a Helm chart on our local machine. For the sake of the this simplified guide, we download and unpack an already existing open source Helm chart for <code>podinfo</code>. In a real world application, this would be your own Helm chart. You will most likely already store your own Helm charts within a <code>git</code> repository and leverage a CI/CD pipeline to build <code>*.tgz</code> Helm chart files in order to push to your Helm chart repository.</p><p>This can easily be achieved with the Helm CLI:</p><pre><code class=language-shell>helm repo add &lt;repo-name&gt; &lt;helm-chart-repo-url&gt;
helm pull --destination &lt;target-dir&gt; &lt;repo-name/chart-name&gt;
</code></pre><p>For the <code>podinfo</code> example:</p><pre><code class=language-shell>helm repo add podinfo https://stefanprodan.github.io/podinfo
helm pull --destination . podinfo/podinfo
</code></pre><p>The Helm chart is then stored in the current working directory as <code>podinfo-6.6.0.tgz</code> and can be referenced as path from there in the <code>component-constructor.yaml</code> file (see below).</p><p>Unpack <code>podinfo-6.6.0.tgz</code> to simulate the process as if this helm chart is our own and is not downloaded from a public repository:</p><pre><code class=language-shell>tar -czf podinfo-6.6.0.tgz podinfo
</code></pre><h3 id=input-specification>Input Specification <a href=#input-specification class=anchor aria-hidden=true>#</a></h3><p>The corresponding input file for building the component version (<a href=https://github.com/open-component-model/ocm-examples/tree/main/components/guide-walkthrough-helm-chart/component-constructor.yaml><code>component-constructor.yaml</code></a>) looks like:</p><pre><code class=language-yaml>components:
# podinfo component
- name: ${COMPONENT_NAME_PREFIX}/podinfo
  labels:
  - name: &quot;org.opencontainers.image.source&quot;
    value: &quot;https://github.com/stb1337/ocm-hello-world-v1&quot;  
  version: ${PODINFO_VERSION}
  provider:
    name: ${PROVIDER}
  resources:
  - name: helm-chart-external
    type: helmChart
    version: ${PODINFO_VERSION}    
    access:
      type: helm
      helmChart: podinfo:${PODINFO_CHART_VERSION}
      helmRepository: https://stefanprodan.github.io/podinfo
  - name: helm-chart-local-tgz
    type: helmChart    
    input:      
      type: helm      
      path: podinfo-${PODINFO_CHART_VERSION}.tgz      
  - name: helm-chart-local-folder
    type: helmChart
    version: ${PODINFO_VERSION}
    input:
      type: dir
      path: ./podinfo/  
  - name: image
    type: ociImage
    version: ${PODINFO_VERSION}
    access:
      type: ociArtifact
      repository: ocm/ocm.software/podinfo/image
      imageReference: ghcr.io/stefanprodan/podinfo:${PODINFO_VERSION}
  
</code></pre><p>Some frequently changing parameters have been extracted as variables. The OCM CLI uses
templating to fill them with values. The templating mechanism is described
<a href=../best-practices-with-ocm#templating-the-resources>here</a>. For this example
we use the simple (default) template engine type <code>subst</code>.</p><p>Note the differences between the various components:</p><h3 id=building-the-common-transport-archive-ctf>Building the Common Transport Archive (CTF) <a href=#building-the-common-transport-archive-ctf class=anchor aria-hidden=true>#</a></h3><p>From the input file <code>component-constructor.yaml</code> the common transport archive can be created with the
OCM CLI. For all variables we need to provide values. Variable values can be passed in the
command line or stored in a file. For many variables having a values file is more convenient.
The corresponding file <a href=https://github.com/open-component-model/ocm-examples/tree/main/components/guide-walkthrough-helm-chart/settings.yaml><code>settings.yaml</code></a> may look like this:</p><pre><code class=language-yaml>VERSION: 0.0.1
NAME: ocm-hello-world-v1
COMPONENT_NAME_PREFIX: ocm.software
PROVIDER: stb1337
PODINFO_VERSION: 6.6.0
PODINFO_CHART_VERSION: 6.6.0
</code></pre><p>Create the transport archive then with:</p><pre><code class=language-shell>ocm add componentversions --create --file &lt;ctf-target-dir&gt; --settings settings.yaml component-constructor.yaml
</code></pre><pre><code class=language-shell>ocm add componentversions --create --file ocm-hello-world --settings settings.yaml component-constructor.yaml
processing component-constructor.yaml...
  processing document 1...
    processing index 1
found 1 component
adding component ocm.software/podinfo:6.6.0...
  adding resource helmChart: &quot;name&quot;=&quot;helm-chart-external&quot;,&quot;version&quot;=&quot;6.6.0&quot;...
  adding resource helmChart: &quot;name&quot;=&quot;helm-chart-local-tgz&quot;,&quot;version&quot;=&quot;&lt;componentversion&gt;&quot;...
  adding resource helmChart: &quot;name&quot;=&quot;helm-chart-local-folder&quot;,&quot;version&quot;=&quot;6.6.0&quot;...  
  adding resource ociImage: &quot;name&quot;=&quot;image&quot;,&quot;version&quot;=&quot;6.6.0&quot;...
</code></pre><p>You can view the generated component descriptor using the command:</p><pre><code class=language-shell>ocm get component -o yaml &lt;ctf-target-dir&gt;
</code></pre><pre><code class=language-shell>ocm get component ./ocm-hello-world 
COMPONENT            VERSION PROVIDER
ocm.software/podinfo 6.6.0   stb1337
</code></pre><p>You can store the transport archive in an OCI registry (this step needs a proper
configuration of credentials for the OCM CLI):</p><pre><code class=language-shell>ocm transfer ctf -f &lt;ctf-target-dir&gt; &lt;oci-repo-url&gt;
</code></pre><pre><code class=language-shell>ocm transfer commontransportarchive --copy-resources --enforce --overwrite ./ocm-hello-world OCIRegistry::ghcr.io/stb1337/ocm-hello-world-v1
transferring component &quot;ocm.software/podinfo&quot;...
  transferring version &quot;ocm.software/podinfo:6.6.0&quot;...
INFO[0000] trying next host - response was http.StatusNotFound  host=ghcr.io
INFO[0001] trying next host - response was http.StatusNotFound  host=ghcr.io
  ...resource 0 helm-chart-external[helmChart]...
  ...resource 1 helm-chart-local-tgz[helmChart](ocm.software/podinfo/podinfo:6.6.0)...
  ...resource 2 helm-chart-local-folder[helmChart]...  
  ...resource 3 image[ociImage](stefanprodan/podinfo:6.6.0)...
  ...adding component version...

</code></pre><p>Note: Be careful with the <code>-f</code> or <code>--overwrite</code> flag. This will replace existing component
versions in the OCI registry. During development it is useful being able to overwrite
existing component versions until something is ready for release. <strong>For released versions
you should never use this flag</strong>! Released component versions should be immutable and
should never be overwritten. They serve as source of truth for what the release is made of
und should never be changed.</p><h3 id=package>Package <a href=#package class=anchor aria-hidden=true>#</a></h3><p>Navigate to the overview of your OCI repository, which should list following items:</p><p><img class="img-fluid lazyload blur-up" src=/images/github-packages-ocm-hello-world.png alt="alt text"></p><h2 id=deploying-the-ocm-software-artifact>Deploying the OCM Software Artifact <a href=#deploying-the-ocm-software-artifact class=anchor aria-hidden=true>#</a></h2><p>Up to now we have created a transport archive containing all required parts (images and Helm charts) for
installing the application. This archive is self-contained and can be transferred to an OCI registry with a single
command from the OCM tooling. After pushing this archive to an OCI registry we have a shared location
that can be used as a source of deployment without any external references. As an alternative you can
transport the archive using offline mechanisms (file transfer, USB-stick) and push it on a target
location in an OCI registry.</p><p>To actually deploy the application we need to get access to the Helm charts contained in the archive.
We can use the OCM CLI to retrieve their location. See the <a href=#example-1>example</a> below.</p><h3 id=setup-local-kind-cluster>Setup Local Kind Cluster <a href=#setup-local-kind-cluster class=anchor aria-hidden=true>#</a></h3><p>Create local <code>kind</code> cluster on your local machine:</p><pre><code class=language-shell>kind create cluster -n ocm-hello-world
</code></pre><pre><code class=language-shell>kind create cluster -n ocm-hello-world
Creating cluster &quot;ocm-hello-world&quot; ...
 ✓ Ensuring node image (kindest/node:v1.29.2) 🖼
 ✓ Preparing nodes 📦  
 ✓ Writing configuration 📜 
 ✓ Starting control-plane 🕹️ 
 ✓ Installing CNI 🔌 
 ✓ Installing StorageClass 💾 
Set kubectl context to &quot;kind-ocm-hello-world&quot;
You can now use your cluster with:

kubectl cluster-info --context kind-ocm-hello-world

Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community 🙂
</code></pre><p>Make sure that your current kubectl context is set to &ldquo;kind-ocm-hello-world&rdquo;:</p><pre><code class=language-shell>kubectl context to &quot;kind-ocm-hello-world&quot;
kubectl cluster-info                        
Kubernetes control plane is running at https://127.0.0.1:52112
CoreDNS is running at https://127.0.0.1:52112/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.
</code></pre><p>Install Flux:</p><pre><code class=language-shell>flux install                                                                                                         
✚ generating manifests
✔ manifests build completed
► installing components in flux-system namespace
CustomResourceDefinition/alerts.notification.toolkit.fluxcd.io created
CustomResourceDefinition/buckets.source.toolkit.fluxcd.io created
CustomResourceDefinition/gitrepositories.source.toolkit.fluxcd.io created
CustomResourceDefinition/helmcharts.source.toolkit.fluxcd.io created
CustomResourceDefinition/helmreleases.helm.toolkit.fluxcd.io created
CustomResourceDefinition/helmrepositories.source.toolkit.fluxcd.io created
CustomResourceDefinition/kustomizations.kustomize.toolkit.fluxcd.io created
CustomResourceDefinition/ocirepositories.source.toolkit.fluxcd.io created
CustomResourceDefinition/providers.notification.toolkit.fluxcd.io created
CustomResourceDefinition/receivers.notification.toolkit.fluxcd.io created
Namespace/flux-system created
ResourceQuota/flux-system/critical-pods-flux-system created
ServiceAccount/flux-system/helm-controller created
ServiceAccount/flux-system/kustomize-controller created
ServiceAccount/flux-system/notification-controller created
ServiceAccount/flux-system/source-controller created
ClusterRole/crd-controller-flux-system created
ClusterRole/flux-edit-flux-system created
ClusterRole/flux-view-flux-system created
ClusterRoleBinding/cluster-reconciler-flux-system created
ClusterRoleBinding/crd-controller-flux-system created
Service/flux-system/notification-controller created
Service/flux-system/source-controller created
Service/flux-system/webhook-receiver created
Deployment/flux-system/helm-controller created
Deployment/flux-system/kustomize-controller created
Deployment/flux-system/notification-controller created
Deployment/flux-system/source-controller created
NetworkPolicy/flux-system/allow-egress created
NetworkPolicy/flux-system/allow-scraping created
NetworkPolicy/flux-system/allow-webhooks created
◎ verifying installation
✔ helm-controller: deployment ready
✔ kustomize-controller: deployment ready
✔ notification-controller: deployment ready
✔ source-controller: deployment ready
✔ install finished
</code></pre><p>Install OCM controller:</p><pre><code class=language-shell>ocm controller install                                                                                                                   
► running pre-install check
► installing prerequisites
► installing cert-manager with version v1.13.2
✔ successfully fetched install file
► applying to cluster...
► waiting for ocm deployment to be ready
✔ cert-manager successfully installed
► creating certificate for internal registry
✔ successfully installed prerequisites
► installing ocm-controller with version latest
► got latest version &quot;v0.18.1&quot;
✔ successfully fetched install file
► applying to cluster...
► waiting for ocm deployment to be ready
✔ ocm-controller successfully installed
</code></pre><h3 id=inspect-component-descriptor>Inspect component descriptor <a href=#inspect-component-descriptor class=anchor aria-hidden=true>#</a></h3><p>Let&rsquo;s assume that we have pushed the transport archive to an OCI registry. We need the identity of the
component version and the location of the component-descriptors in the OCI registry:</p><p>ComponentVersion:
name: <code>ocm.software/podinfo</code>
version: <code>6.6.0</code></p><p>URL of OCI registry: <code>ghcr.io/stb1337/ocm-hello-world-v1</code></p><p>It is convenient to put this into an environment variable:</p><pre><code class=language-shell>export OCM_REPO=ghcr.io/stb1337/ocm-hello-world-v1
</code></pre><p>Getting the component version 6.6.0 of the application with the OCM CLI:</p><pre><code class=language-shell>ocm get componentversion --repo OCIRegistry::${OCM_REPO} ocm.software/podinfo:6.6.0 -o yaml
</code></pre><pre><code class=language-yaml>---
component:
  componentReferences: []
  creationTime: &quot;2024-03-21T15:55:18Z&quot;
  labels:
  - name: org.opencontainers.image.source
    value: https://github.com/stb1337/ocm-hello-world-v1
  name: ocm.software/podinfo
  provider: stb1337
  repositoryContexts:
  - baseUrl: ghcr.io
    componentNameMapping: urlPath
    subPath: stb1337/ocm-hello-world-v1
    type: OCIRegistry
  resources:
  - access:
      localReference: sha256:cf9318c4944f733f8ce925ca0b818cdae638dce4107a13c3395984bb86306c4b
      mediaType: application/vnd.cncf.helm.chart.content.v1.tar+gzip
      type: localBlob
    digest:
      hashAlgorithm: SHA-256
      normalisationAlgorithm: genericBlobDigest/v1
      value: cf9318c4944f733f8ce925ca0b818cdae638dce4107a13c3395984bb86306c4b
    name: helm-chart-external
    relation: external
    type: helmChart
    version: 6.6.0
  - access:
      imageReference: ghcr.io/stb1337/ocm-hello-world-v1/ocm.software/podinfo/podinfo:6.6.0
      type: ociArtifact
    digest:
      hashAlgorithm: SHA-256
      normalisationAlgorithm: ociArtifactDigest/v1
      value: fa473086ce82810801785ec4ab70763fa81fcd971082035906a1695b9014c019
    name: helm-chart-local-tgz
    relation: local
    type: helmChart
    version: 6.6.0
  - access:
      localReference: sha256:8ff0604bfaebe6791ac4285c38a9f02771452497530367eeae49f1cf8594ca4c
      mediaType: application/x-tar
      type: localBlob
    digest:
      hashAlgorithm: SHA-256
      normalisationAlgorithm: genericBlobDigest/v1
      value: 8ff0604bfaebe6791ac4285c38a9f02771452497530367eeae49f1cf8594ca4c
    name: helm-chart-local-folder
    relation: local
    type: helmChart
    version: 6.6.0
  - access:
      localReference: sha256:4a05cbc915a171301efdaad863d7d1bb0bc9193730767eca9385c49361956863
      mediaType: application/x-tgz
      type: localBlob
    digest:
      hashAlgorithm: SHA-256
      normalisationAlgorithm: genericBlobDigest/v1
      value: 4a05cbc915a171301efdaad863d7d1bb0bc9193730767eca9385c49361956863
    name: manifests
    relation: local
    type: dir
    version: 6.6.0
  - access:
      imageReference: ghcr.io/stb1337/ocm-hello-world-v1/stefanprodan/podinfo:6.6.0
      type: ociArtifact
    digest:
      hashAlgorithm: SHA-256
      normalisationAlgorithm: ociArtifactDigest/v1
      value: c04843c796025fbaa2574344994cb2461041b5e1d6b7a0de76b2b9fa46318e08
    name: image
    relation: external
    type: ociImage
    version: 6.6.0
  sources: []
  version: 6.6.0
meta:
  schemaVersion: v2
</code></pre><p>With this we can drill down to the installable Helm charts and the container images:</p><pre><code class=language-shell>ocm get resource --repo OCIRegistry::${OCM_REPO} ocm.software/podinfo:6.6.0 -o wide
NAME                    VERSION IDENTITY TYPE      RELATION ACCESSTYPE  ACCESSSPEC
helm-chart-external     6.6.0            helmChart external localBlob   {&quot;localReference&quot;:&quot;sha256:cf9318c4944f733f8ce925ca0b818cdae638dce4107a13c3395984bb86306c4b&quot;,&quot;mediaType&quot;:&quot;application/vnd.cncf.helm.chart.content.v1.tar+gzip&quot;}
helm-chart-local-folder 6.6.0            helmChart local    localBlob   {&quot;localReference&quot;:&quot;sha256:8ff0604bfaebe6791ac4285c38a9f02771452497530367eeae49f1cf8594ca4c&quot;,&quot;mediaType&quot;:&quot;application/x-tar&quot;}
helm-chart-local-tgz    6.6.0            helmChart local    ociArtifact {&quot;imageReference&quot;:&quot;ghcr.io/stb1337/ocm-hello-world-v1/ocm.software/podinfo/podinfo:6.6.0&quot;}
image                   6.6.0            ociImage  external ociArtifact {&quot;imageReference&quot;:&quot;ghcr.io/stb1337/ocm-hello-world-v1/stefanprodan/podinfo:6.6.0&quot;}
</code></pre><h3 id=apply-k8s-manifest>Apply k8s manifest <a href=#apply-k8s-manifest class=anchor aria-hidden=true>#</a></h3><p>Create file <a href=https://github.com/open-component-model/ocm-examples/tree/main/kubernetes/guide-walkthrough-helm-chart/01-pod-info-kind.yaml><code>k8s-component-version/01-pod-info-kind.yaml</code></a> with following content:</p><pre><code class=language-yaml>#k8s-component-version/01-pod-info-kind.yaml 
kind: ComponentVersion
metadata:
  name: ocm-hello-world-podinfo
  namespace: ocm-system
spec:
  component: ocm.software/podinfo
  interval: 10s
  references:
    expand: true
  repository:
    url: ghcr.io/stb1337/ocm-hello-world-v1
    secretRef:
      name: ghcr-pull-secret
  version:
    semver: &quot;6.6.0&quot;
---
apiVersion: delivery.ocm.software/v1alpha1
kind: Resource
metadata:
  name: ocm-hello-world-podinfo-helm-chart-external
  namespace: ocm-system
spec:
  interval: 10s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: ComponentVersion
    name: ocm-hello-world-podinfo
    namespace: ocm-system
    resourceRef:
      name: helm-chart-external
      version: &quot;6.6.0&quot;
      extraIdentity:
        helmChart: podinfo
---
apiVersion: delivery.ocm.software/v1alpha1
kind: FluxDeployer
metadata:
  name: ocm-hello-world-podinfo-helm-chart-external
  namespace: ocm-system
spec:
  interval: 10s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Resource
    name: ocm-hello-world-podinfo-helm-chart-external
  helmReleaseTemplate:
    chart: 
      spec: 
        chart: &quot;podinfo&quot;
        interval: 10s
    values:      
      replicaCount: 3
      image:
        repository: ghcr.io/stb1337/ocm-hello-world-v1/stefanprodan/podinfo
      ui:
        color: &quot;#8F00FF&quot;
        message: &quot;Hello from remote referenced Helm Chart&quot;      
      serviceAccount:        
        enabled: true        
        name: &quot;sa-podinfo-ghcr-io-1&quot;
        imagePullSecrets:
        - name: pull-secret
    interval: 10s
    releaseName: &quot;podinfo-helm-chart-external&quot;
    targetNamespace: default
---
apiVersion: delivery.ocm.software/v1alpha1
kind: Resource
metadata:
  name: ocm-hello-world-podinfo-helm-chart-local-tgz
  namespace: ocm-system
spec:
  interval: 10s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: ComponentVersion
    name: ocm-hello-world-podinfo
    namespace: ocm-system
    resourceRef:
      name: helm-chart-local-tgz
      version: &quot;6.6.0&quot;
      extraIdentity:
        helmChart: podinfo # name of the chart
---
apiVersion: delivery.ocm.software/v1alpha1
kind: FluxDeployer
metadata:
  name: ocm-hello-world-podinfo-helm-chart-local-tgz
  namespace: ocm-system
spec:
  interval: 10s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: Resource
    name: ocm-hello-world-podinfo-helm-chart-local-tgz
  helmReleaseTemplate:
    chart: 
      spec: 
        chart: &quot;podinfo&quot;
        interval: 10s        
    values:
      replicaCount: 2
      image:
        repository: ghcr.io/stb1337/ocm-hello-world-v1/stefanprodan/podinfo
      ui:
        color: &quot;#FFC0CB&quot;
        message: &quot;Hello from local .tar file Helm Chart&quot;        
      serviceAccount:        
        enabled: true        
        name: &quot;sa-podinfo-ghcr-io-2&quot;
        imagePullSecrets:
        - name: pull-secret
    interval: 10s
    releaseName: &quot;podinfo-helm-chart-local-tgz&quot;
    targetNamespace: default    
---
apiVersion: delivery.ocm.software/v1alpha1
kind: Resource
metadata:
  name: ocm-hello-world-podinfo-image
  namespace: ocm-system
spec:
  interval: 10s
  sourceRef:
    apiVersion: delivery.ocm.software/v1alpha1
    kind: ComponentVersion
    name: ocm-hello-world-podinfo
    namespace: ocm-system
    resourceRef:
      name: image
      version: &quot;6.6.0&quot;
</code></pre><p>Create two k8s secrets in order for OCM and k8s to pull from your private OCI registry:</p><pre><code class=language-shell>export GITHUB_USER=.. &amp;&amp; export GITHUB_TOKEN=ghp_.... &amp;&amp; export GITHUB_USER_EMAIL=steffen....

kubectl create secret docker-registry pull-secret -n default \
    --docker-server=ghcr.io \
    --docker-username=$GITHUB_USER \
    --docker-password=$GITHUB_TOKEN \
    --docker-email=$GITHUB_USER_EMAIL

kubectl create secret generic ghcr-pull-secret -n ocm-system \
    --from-literal=username=$GITHUB_USER \
    --from-literal=password=$GITHUB_TOKEN
</code></pre><p>Apply the manifest to your local <code>kind</code> cluster:</p><pre><code class=language-shell>k apply -f k8s-component-version/01-pod-info-kind.yaml 
componentversion.delivery.ocm.software/ocm-hello-world-podinfo created
resource.delivery.ocm.software/ocm-hello-world-podinfo-helm-chart-external created
fluxdeployer.delivery.ocm.software/ocm-hello-world-podinfo-helm-chart-external created
resource.delivery.ocm.software/ocm-hello-world-podinfo-helm-chart-local-tgz created
fluxdeployer.delivery.ocm.software/ocm-hello-world-podinfo-helm-chart-local-tgz created
resource.delivery.ocm.software/ocm-hello-world-podinfo-image created
</code></pre><pre><code class=language-shell>kubectl port-forward service/podinfo-helm-chart-external -n default 9898:9898
Forwarding from 127.0.0.1:9898 -&gt; 9898
Forwarding from [::1]:9898 -&gt; 9898
Handling connection for 9898
</code></pre><p><img class="img-fluid lazyload blur-up" src=/images/guide-helm-charts-hello-world.png alt="alt text"></p><pre><code class=language-shell>kubectl port-forward service/podinfo-helm-chart-local-tgz -n default 9898:9898 
Forwarding from 127.0.0.1:9898 -&gt; 9898
Forwarding from [::1]:9898 -&gt; 9898
Handling connection for 9898
</code></pre><p><img class="img-fluid lazyload blur-up" src=/images/guide-helm-charts-hello-world-2.png alt="alt text"></p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="docs-navigation d-flex justify-content-between"><a href=/docs/overview/scope/><div class="card my-1"><div class="card-body py-2">&larr; Scope</div></div></a><a class=ms-auto href=/docs/overview/installation/><div class="card my-1"><div class="card-body py-2">Installation &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container-fluid><div class="row justify-content-center"><div class=col-lg-12><p class=text-center><small>© Copyright 2024, <a href=https://www.sap.com/corporate/en/legal/copyright.html>SAP SE</a> and Open Component Model Contributors | <a href=https://www.sap.com/about/legal/trademark.html>Trademark</a> | <a href=/privacy-policy/>Privacy Policy</a> | <a href=https://www.sap.com/corporate/en/legal/terms-of-use.html>Terms of Use</a> | <a href=https://www.sap.com/corporate/en/legal/impressum.html>Legal Disclosure</a></small></p></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/js/bootstrap.min.54bf0932b8a36d0e152b1635b099a6ef1394d35327e2437550a075c9c8ed1bd8aed5847c21b36fc02ed24014c031d9ca24017b0c78b1639d7e2fa8329898b842.js integrity="sha512-VL8JMrijbQ4VKxY1sJmm7xOU01Mn4kN1UKB1ycjtG9iu1YR8IbNvwC7SQBTAMdnKJAF7DHixY51+L6gymJi4Qg==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.56a414730f1135fe77b5ea30bf74a2cc4101a6f386e85e5b789c800570cc33d33054000f45932c053a59b41018f72687867254a80e1b9710671852492533162f.js integrity="sha512-VqQUcw8RNf53teowv3SizEEBpvOG6F5beJyABXDMM9MwVAAPRZMsBTpZtBAY9yaHhnJUqA4blxBnGFJJJTMWLw==" crossorigin=anonymous defer></script>
<script src=/main.min.867372088b3d9d28e68d38f8a8365d28934d875dc849d445fe06cc02a75d29286fa27e6ab5f9820c0d5bdcf90711a1ee7a4d89a7e0bee27ebb521ecd1c1f0175.js integrity="sha512-hnNyCIs9nSjmjTj4qDZdKJNNh13ISdRF/gbMAqddKShvon5qtfmCDA1b3PkHEaHuek2Jp+C+4n67Uh7NHB8BdQ==" crossorigin=anonymous defer></script>
<script type=text/javascript async src=https://play.vidyard.com/embed/v4.js></script></body></html>